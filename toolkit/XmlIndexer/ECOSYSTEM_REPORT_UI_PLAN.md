# Ecosystem HTML Report UI Plan (Professional / Compact / Dark)

## 1) Goal
Redesign the HTML report generated by XmlIndexer into a **professional, compact, high-contrast dark** layout that:
- Reads like a clean engineering dashboard (not a “toy page”).
- Is dense and scannable (minimal padding, consistent type scale).
- Uses **one consistent interaction style** for expand/collapse (no mixed dropdown/accordion styles).
- Avoids “dead cards” (non-interactive blocks should not look clickable).
- Uses the **right-side empty space** as a dashboard panel with charts/summary widgets.
- Remains self-contained (no external JS/CSS dependencies).

Non-goals:
- No heavy charting libraries.
- No complex client-side filtering/search unless explicitly requested later.

## 2) Information Architecture
### Left Nav (sticky)
Purpose: quick jump between report sections.
- Dashboard
- Mods
- Health
- Conflicts
- Facts
- Theme selector (optional; small)

### Main Content (center)
Primary reading column.
- Header: title + timestamp
- KPI strip: totals (defs, props, refs, mods, XML/C#/Hybrid)
- Expandable sections:
  - Definitions by Type
  - XML Operations
  - C# Analysis (including Harmony patches + class extensions)
- “Installed Mods” list (Mod Overview): expandable per mod
- Ecosystem Health (summary + critical conflicts)
- Shared Entities (contested entities)
- Fun Facts (non-interactive, “boxed rows” not cards)

### Right Dashboard (sticky)
Secondary column with compact “widgets” and micro charts.
- Health breakdown (Healthy/Review/Broken)
- Risk breakdown (None/Low/Medium/High)
- Top contested entities / top modified entity types
- Quick reminders/legend

## 3) Layout Spec
### Grid
Three-column CSS grid:
- `nav` ~160px
- `main` fluid
- `aside` `clamp(260px, 24vw, 380px)`

Responsive:
- Below ~980px: collapse to single column.
- Hide nav; move dashboard under main content.

## 4) Design System (Tokens)
### Spacing (tight)
Use small step tokens (pixels intentionally compact):
- `--s1: 2px`
- `--s2: 4px`
- `--s3: 6px`
- `--s4: 10px`
- `--s5: 14px`

### Typography
- Base: `12px`
- Small: `11px`
- XS: `10px`
- Medium header: `13px`

Font stack: `Segoe UI`, system UI fallback.

### Colors (high contrast)
A “Carbon” baseline (GitHub-like) with optional alternates.

**Required semantic colors**
- Background: `--bg`
- Surface: `--bg2`
- Elevated surface: `--card`
- Border: `--border`
- Text: `--text`
- Muted text: `--muted`
- Dim text: `--dim`
- Status: `--green`, `--yellow`, `--red`
- Accent: `--cyan`, `--purple`

**Theme variants** (optional)
- Carbon (default)
- Graphite
- Obsidian
- Blue

Rules:
- Borders are always visible in dark mode (avoid “washed out”).
- Use accent color sparingly (KPIs, links, key tags).

## 5) Component Specs (single-style rule)
### A) Expand/Collapse (ONE style only)
Use native `<details><summary>` everywhere for collapsibles:
- Mod Overview items
- “Definitions by Type”
- “XML Operations”
- “C# Analysis”

Summary style:
- Compact padding
- Border + subtle surface fill
- Triangle marker via `summary::before` (▸ / ▾)
- Hover state uses `--border` or slightly lighter surface
- Focus-visible outline in `--cyan`

### B) Panels (non-clickable)
Dashboard widgets and some grouped sections use `.panel`:
- Border only + transparent background
- No hover highlight unless interactive

### C) Tables
- Tight row padding
- Uppercase headers (xs)
- Row hover allowed (table affordance is acceptable)

### D) Tags / Badges
One badge style only:
- `.tag` base + variants:
  - `.tag-y` (yellow)
  - `.tag-p` (purple)
  - `.tag-c` (cyan)

### E) Alerts
One alert style:
- Left border in semantic color
- Subtle tinted background

### F) Non-interactive “fact tiles”
Must not look clickable:
- Use border + transparent background
- No hover effect
- Square-ish radius (2px)

## 6) Mod Overview (Expandable from Mod Name)
Requirement: “What Each Mod Does” content is shown by expanding the mod entry in Mod Overview.

Per-mod summary row should contain:
- Mod name (left-aligned)
- Type (XML/C#/Hybrid/Assets)
- Health tag + short health note
- Small numeric KPIs (xml ops, C# deps, removes)

Expanded body contains:
- One-liner summary
- Key features list (bulleted or inline list)
- Systems affected
- Warnings (if any)
- Optional ModInfo.xml fields (author, version, website) if available

## 7) Dashboard Widgets / Micro Charts
No external libs.

### A) Mini bar rows
A simple “label + bar + value” per row:
- Layout: `54px | 1fr | 42px`
- Bar background: `--border`
- Fill: `--cyan` (or semantic color per series)

Widgets:
1) Health breakdown
   - Healthy (green)
   - Review (yellow)
   - Broken (red)

2) Risk breakdown
   - None/Low/Medium/High (cyan/purple/yellow/red or similar)

3) Top contested entities (list)
4) Most modified entity types (list)

## 8) Data Mapping (What populates what)
Inputs are from `ReportData` (already assembled by the report generator):
- KPIs: totals + mod counts
- Tables: definitions by type, operations by type, C# analysis summary
- Mod Overview:
  - From `ModSummary`
  - Merge/attach behavioral text from `ModBehaviors` by ModName
- Health breakdown:
  - Group `ModSummary` by Health
- Risk breakdown:
  - Group `ContestedEntities` by RiskLevel
- Critical conflicts:
  - `DangerZone`

## 9) Implementation Approach (Generator-side)
### A) Single HTML template
Keep a single, self-contained HTML document string with embedded CSS.

### B) Helper HTML builders
Use small helper methods that return string fragments:
- `GenerateCombinedModListHtml(modSummary, modBehaviors)`
- `GenerateDashboardHtml(reportData)`
- Existing contested entity table generator stays consistent with the design system.

### C) Safety rules for C# string literals
If using a verbatim interpolated string `$@"..."`:
- Any literal `"` must be written as `""` inside the template, including inside CSS comments.
- Prefer avoiding double-quotes in CSS comments entirely (or use single quotes).

(Alternative: build the HTML with a `StringBuilder` + append lines to avoid large verbatim blocks.)

## 10) Visual Quality Checklist
- No right-aligned mod names.
- No multiple styles of collapsibles/badges/alerts.
- No “dead cards” (only interactive elements look interactive).
- Contrast: borders and headings are crisp; muted text is still readable.
- Dashboard feels useful: at-a-glance health/risk and top hotspots.

## 11) Deliverables
- Updated HTML generator output matches the design system above.
- One new report generation snapshot for manual review.
- Optional: small screenshot set for validation (outside of code).
