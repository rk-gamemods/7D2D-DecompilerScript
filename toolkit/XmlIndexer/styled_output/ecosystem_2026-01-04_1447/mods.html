<!DOCTYPE html>
<html lang="en" data-theme="obsidian">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mods - 7D2D Ecosystem</title>
    <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
<nav class="site-nav">
  <div class="nav-brand">7D2D Ecosystem</div>
  <a href="index.html" class="nav-item">Dashboard</a>
  <a href="entities.html" class="nav-item">Entities</a>
  <a href="mods.html" class="nav-item active">Mods</a>
  <a href="conflicts.html" class="nav-item">Conflicts</a>
  <a href="dependencies.html" class="nav-item">Dependencies</a>
  <a href="csharp.html" class="nav-item">C# Analysis</a>
  <a href="gamecode.html" class="nav-item">Game Code</a>
  <a href="glossary.html" class="nav-item">Glossary</a>
  <select class="theme-select" onchange="setTheme(this.value)">
    <option value="obsidian">Obsidian</option>
    <option value="graphite">Graphite</option>
  </select>
</nav>

<div class="page-container">
<div class="page-header">
  <h1>Mod Analysis</h1>
  <p>Detailed view of 24 installed mods</p>
</div>
<div class="stats-bar">
<div class="stat"><span class="stat-value" style="color: var(--accent);">24</span><span class="stat-label">Healthy</span></div>
<div class="stat"><span class="stat-value" style="color: var(--accent-secondary);">0</span><span class="stat-label">Need Review</span></div>
<div class="stat"><span class="stat-value" style="color: var(--danger);">0</span><span class="stat-label">Broken</span></div>
<div class="stat"><span class="stat-value">18</span><span class="stat-label">XML Only</span></div>
<div class="stat"><span class="stat-value">5</span><span class="stat-label">C# Only</span></div>
<div class="stat"><span class="stat-value">0</span><span class="stat-label">Hybrid</span></div>
</div>
<div class="filter-bar">
  <input type="text" class="filter-search" id="mod-search" placeholder="Search mods..." oninput="filterMods()">
  <select class="filter-select" id="health-filter" onchange="filterMods()">
    <option value="">All Health</option>
    <option value="Healthy">Healthy</option>
    <option value="Review">Need Review</option>
    <option value="Broken">Broken</option>
  </select>
  <select class="filter-select" id="type-filter" onchange="filterMods()">
    <option value="">All Types</option>
    <option value="XML">XML Only</option>
    <option value="C#">C# Only</option>
    <option value="Hybrid">Hybrid</option>
    <option value="Config">Config Only</option>
  </select>
  <label class="fuzzy-toggle"><input type="checkbox" id="fuzzy-toggle" checked onchange="filterMods()"> Fuzzy</label>
</div>
<div id="mod-results"></div>

</div>
<script>

// Fuzzy search scoring - matches characters in order, not necessarily adjacent
function fuzzyScore(query, target) {
  if (!query) return 1;
  query = query.toLowerCase();
  target = target.toLowerCase();
  let qi = 0, score = 0, lastMatch = -1;
  for (let ti = 0; ti < target.length && qi < query.length; ti++) {
    if (target[ti] === query[qi]) {
      score += (ti === lastMatch + 1) ? 2 : 1; // Bonus for consecutive
      lastMatch = ti;
      qi++;
    }
  }
  return qi === query.length ? score : 0;
}

// Generic search helper
function searchItems(query, items, getSearchText) {
  if (!query) return items.slice(0, 20);
  return items
    .map(item => ({ item, score: fuzzyScore(query, getSearchText(item)) }))
    .filter(x => x.score > 0)
    .sort((a, b) => b.score - a.score)
    .map(x => x.item);
}

// Theme persistence
function initTheme() {
  const saved = localStorage.getItem('7d2d-theme') || 'obsidian';
  document.documentElement.dataset.theme = saved;
  const select = document.querySelector('.theme-select');
  if (select) select.value = saved;
}

function setTheme(theme) {
  document.documentElement.dataset.theme = theme;
  localStorage.setItem('7d2d-theme', theme);
}

// Initialize on load
document.addEventListener('DOMContentLoaded', initTheme);

// Debounce helper for search
function debounce(fn, delay) {
  let timer;
  return function(...args) {
    clearTimeout(timer);
    timer = setTimeout(() => fn.apply(this, args), delay);
  };
}

// Show/hide more items
function toggleShowMore(btn, containerId, allItems, renderFn) {
  const container = document.getElementById(containerId);
  const showAll = btn.dataset.expanded !== 'true';

  if (showAll) {
    container.innerHTML = allItems.map(renderFn).join('');
    btn.textContent = 'Show Less';
    btn.dataset.expanded = 'true';
  } else {
    container.innerHTML = allItems.slice(0, 20).map(renderFn).join('');
    btn.textContent = `Show All (${allItems.length})`;
    btn.dataset.expanded = 'false';
  }
}



// Inline JSON - simple, works offline
// FUTURE LAZY LOADING: Replace with fetch() call to ./data/mod_data.json
const MOD_DATA = [{"name":"(TMO) Blade Traps and Defenses v3_v2.4Stable","loadOrder":1,"folderName":"(TMO) Blade Traps and Defenses v3_v2.4Stable","modType":"XML","health":"Healthy","healthNote":"XML: 6 appends on 0 entities","xmlOps":6,"csharpDeps":0,"removes":0,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!-- Stage 1 - Spinning Blade Trap Short --\u003E\r\n  \u003Cblock name=\u0022TheMeanOne_SpinningBladeTrap1_Short\u0022\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022BladeTrapShort\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022BladeTrap\u0022 /\u003E\r\n    \u003Cproperty name=\u0022RequiredPower\u0022 value=\u002218\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Damage\u0022 value=\u002223\u0022 /\u003E\r\n    \u003Cproperty name=\u0022ModelOffset\u0022 value=\u00220,0,0\u0022 /\u003E\r\n    \u003Cproperty name=\u0022DamageReceived\u0022 value=\u00223.5\u0022 /\u003E\r\n    \u003Cproperty n..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/items","elementContent":"\u003Cappend xpath=\u0022/items\u0022\u003E\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/materials","elementContent":"\u003Cappend xpath=\u0022/materials\u0022\u003E\r\n  \u003C!-- Blade Traps --\u003E\r\n  \u003Cmaterial id=\u0022TheMeanOne_SpinningBladeTrap1_Short\u0022\u003E\r\n    \u003Cproperty name=\u0022damage_category\u0022 value=\u0022metal\u0022 /\u003E\r\n    \u003Cproperty name=\u0022surface_category\u0022 value=\u0022metal\u0022 /\u003E\r\n    \u003Cproperty name=\u0022forge_category\u0022 value=\u0022steel\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Hardness\u0022 type=\u0022float\u0022 value=\u00221\u0022 /\u003E\r\n    \u003Cproperty name=\u0022stepsound\u0022 value=\u0022metal\u0022 /\u003E\r\n    \u003Cproperty name=\u0022stability_glue\u0022 value=\u002242\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Mass\u0022 type=\u0022int\u0022 value=\u002212\u0022 /\u003E\r\n    \u003Cproperty name..."},{"operation":"insertAfter","targetType":null,"targetName":null,"property":null,"xpath":"//crafting_skill[@name=\u0027craftingTraps\u0027]/display_entry[@icon=\u0027autoTurret\u0027]","elementContent":"\u003CinsertAfter xpath=\u0022//crafting_skill[@name=\u0027craftingTraps\u0027]/display_entry[@icon=\u0027autoTurret\u0027]\u0022\u003E\r\n  \u003Cdisplay_entry icon=\u0022BladeTrapShort\u0022 name_key=\u0022Traps Expansion PLUS\u0022 has_quality=\u0022false\u0022 unlock_level=\u002260,55,45,35\u0022\u003E\r\n    \u003Cunlock_entry item=\u0022TheMeanOne_BlackenedSteelWallTrapStage1\u0022 unlock_tier=\u00224\u0022 /\u003E\r\n    \u003Cunlock_entry item=\u0022TheMeanOne_BlackenedSteelSpikeWallS1\u0022 unlock_tier=\u00223\u0022 /\u003E\r\n    \u003Cunlock_entry item=\u0022TheMeanOne_BlackenedSteelGroundSpikesS1\u0022 unlock_tier=\u00222\u0022 /\u003E\r\n    \u003Cunlock_entry item=\u0022TheMean..."},{"operation":"insertAfter","targetType":null,"targetName":null,"property":null,"xpath":"//crafting_skill[@name=\u0027craftingTraps\u0027]/effect_group/passive_effect[@name=\u0027RecipeTagUnlocked\u0027 and @tags=\u0027autoTurret\u0027]","elementContent":"\u003CinsertAfter xpath=\u0022//crafting_skill[@name=\u0027craftingTraps\u0027]/effect_group/passive_effect[@name=\u0027RecipeTagUnlocked\u0027 and @tags=\u0027autoTurret\u0027]\u0022\u003E\r\n  \u003Cpassive_effect name=\u0022RecipeTagUnlocked\u0022 operation=\u0022base_set\u0022 level=\u002235,100\u0022 value=\u00224\u0022 tags=\u0022TheMeanOne_BlackenedSteelWallTrapStage1\u0022 /\u003E\r\n  \u003Cpassive_effect name=\u0022RecipeTagUnlocked\u0022 operation=\u0022base_set\u0022 level=\u002245,100\u0022 value=\u00223\u0022 tags=\u0022TheMeanOne_BlackenedSteelSpikeWallS1\u0022 /\u003E\r\n  \u003Cpassive_effect name=\u0022RecipeTagUnlocked\u0022 operation=\u0022base_set\u0022 level=\u002255,100\u0022 val..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"recipes","elementContent":"\u003Cappend xpath=\u0022recipes\u0022\u003E\r\n  \u003C!-- Recipe for Stage 1 - Spinning Blade Trap Short  --\u003E\r\n  \u003C!-- Upgradable to variant 2 --\u003E\r\n  \u003Crecipe name=\u0022TheMeanOne_SpinningBladeTrap1_Short\u0022 count=\u00221\u0022 craft_area=\u0022workbench\u0022 tags=\u0022perkAdvancedEngineering,learnable\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceForgedIron\u0022 count=\u002220\u0022 /\u003E\r\n    \u003C!-- 10 * 2 --\u003E\r\n    \u003Cingredient name=\u0022resourceForgedSteel\u0022 count=\u002220\u0022 /\u003E\r\n    \u003C!-- 10 * 2 --\u003E\r\n    \u003Cingredient name=\u0022resourceMechanicalParts\u0022 count=\u002216\u0022 /\u003E\r\n    \u003C!-- 8 * 2 --\u003E\r\n    \u003Cingre..."}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"0_TFP_Harmony","loadOrder":2,"folderName":"0_TFP_Harmony","modType":"C#","health":"Healthy","healthNote":"C#: 1 game code patches","xmlOps":0,"csharpDeps":1,"removes":0,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[],"patches":[],"extensions":[{"baseClass":"imodapi","childClass":"IModApi"}],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"AGF-V2-Backpack72Plus-v3.2.0","loadOrder":3,"folderName":"AGF-V2-Backpack72Plus-v3.2.0","modType":"XML","health":"Healthy","healthNote":"XML: 11 sets, 18 appends on 10 entities","xmlOps":29,"csharpDeps":0,"removes":0,"oneLiner":"Modifies Buffs/Effects, Entities, Loot","features":[],"systems":["Buffs/Effects","Entities","Loot","Progression","book"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--WritableCrate--\u003E\r\n  \u003Cblock name=\u0022cntWoodWritableCrateLarge\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022cntWoodWritableCrate\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022930CF8\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022CompositeTileEntity\u0022 /\u003E\r\n    \u003Cproperty class=\u0022CompositeFeatures\u0022\u003E\r\n      \u003Cproperty class=\u0022TEFeatureStorage\u0022\u003E\r\n        \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n      \u003C/prop..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--Cube--\u003E\r\n  \u003Cblock name=\u0022cntWoodCube\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCube\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Model\u0022 value=\u0022@:Shapes/..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--Bevel--\u003E\r\n  \u003Cblock name=\u0022cntWoodBevel\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCupboardCorner\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Model\u0022 valu..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--Buffet--\u003E\r\n  \u003Cblock name=\u0022cntWoodBuffet\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeBuffetCounter\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Model\u0022 val..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--SinkRound--\u003E\r\n  \u003Cblock name=\u0022cntWoodSinkRound\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCounterSinkHoleRound\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty nam..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--HollowTop--\u003E\r\n  \u003Cblock name=\u0022cntWoodHollowTop\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCounterHollowTop\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=\u0022M..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--BevelBookCase--\u003E\r\n  \u003Cblock name=\u0022cntWoodBevelBookCase\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCubeCornerBeveledBookcaseFull\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--BookCase--\u003E\r\n  \u003Cblock name=\u0022cntWoodBookCase\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeBookcaseFull\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Model\u0022 ..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--MorticianDrawer--\u003E\r\n  \u003Cblock name=\u0022cntWoodMorticianDrawer\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeMorticianDrawer\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cprope..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--Half--\u003E\r\n  \u003Cblock name=\u0022cntWoodHalf\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCubeHalf\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Model\u0022 value=\u0022@:Sha..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--Counter--\u003E\r\n  \u003Cblock name=\u0022cntWoodCounter\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCounter\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Model\u0022 value=\u0022..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--CounterRound--\u003E\r\n  \u003Cblock name=\u0022cntWoodCounterRound\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCounterRound1m\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty nam..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--CabinetAjar--\u003E\r\n  \u003Cblock name=\u0022cntWoodCabinetAjar\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCabinetAjar\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Mo..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--CupboardAjar--\u003E\r\n  \u003Cblock name=\u0022cntWoodCupboardAjar\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeCupboardAjar\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003C!--BookCaseCube--\u003E\r\n  \u003Cblock name=\u0022cntWoodBookcaseCube\u0022\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022shapeBookcaseCubeFull\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022522901\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022SecureLoot\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootList\u0022 value=\u0022playerWoodWritableStorageLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MwoodReinforced\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty n..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003Cblock name=\u0022storageLargeWoodVariantHelper\u0022\u003E\r\n    \u003Cproperty name=\u0022Extends\u0022 value=\u0022cntWoodWritableCrateLarge\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022cntWoodWritableCrate\u0022 /\u003E\r\n    \u003Cproperty name=\u0022AllowedRotations\u0022 value=\u0022No45\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIconTint\u0022 value=\u0022930CF8\u0022 /\u003E\r\n    \u003Cproperty name=\u0022DescriptionKey\u0022 value=\u0022storageLargeVariantHelperDesc\u0022 /\u003E\r\n    \u003Cproperty name=\u0022ItemTypeIcon\u0022 value=\u0022all_blocks\u0022 /\u003E\r\n    \u003Cproperty name=\u0022SelectAlternates\u0022 value=\u0022true..."},{"operation":"set","targetType":"buff","targetName":"god","property":"CarryCapacity","xpath":"/buffs/buff[@name=\u0027god\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/buffs/buff[@name=\u0027god\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value\u0022\u003E72\u003C/set\u003E"},{"operation":"set","targetType":"buff","targetName":"buffDrugSteroids","property":"CarryCapacity","xpath":"/buffs/buff[@name=\u0027buffDrugSteroids\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/buffs/buff[@name=\u0027buffDrugSteroids\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value\u0022\u003E77\u003C/set\u003E"},{"operation":"set","targetType":"buff","targetName":"twitch_buffPackMule","property":"CarryCapacity","xpath":"/buffs/buff[@name=\u0027twitch_buffPackMule\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/buffs/buff[@name=\u0027twitch_buffPackMule\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value\u0022\u003E77\u003C/set\u003E"},{"operation":"set","targetType":"buff","targetName":"twitch_buffEncumbered","property":"CarryCapacity","xpath":"/buffs/buff[@name=\u0027twitch_buffEncumbered\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/buffs/buff[@name=\u0027twitch_buffEncumbered\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value\u0022\u003E31\u003C/set\u003E"},{"operation":"set","targetType":"buff","targetName":"buffEncumberedInv","property":"value","xpath":"/buffs/buff[@name=\u0027buffEncumberedInv\u0027]/effect_group/triggered_effect[@operation=\u0027multiply\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/buffs/buff[@name=\u0027buffEncumberedInv\u0027]/effect_group/triggered_effect[@operation=\u0027multiply\u0027]/@value\u0022\u003E0.01297\u003C/set\u003E"},{"operation":"set","targetType":"entity_class","targetName":"playerMale","property":"CarryCapacity","xpath":"/entity_classes/entity_class[@name=\u0027playerMale\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/entity_classes/entity_class[@name=\u0027playerMale\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value\u0022\u003E36\u003C/set\u003E"},{"operation":"set","targetType":"entity_class","targetName":"playerMale","property":"BagSize","xpath":"/entity_classes/entity_class[@name=\u0027playerMale\u0027]/effect_group/passive_effect[@name=\u0027BagSize\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/entity_classes/entity_class[@name=\u0027playerMale\u0027]/effect_group/passive_effect[@name=\u0027BagSize\u0027]/@value\u0022\u003E72\u003C/set\u003E"},{"operation":"set","targetType":"loot_container","targetName":"playerBackpack","property":"size","xpath":"/lootcontainers/lootcontainer[@name=\u0027playerBackpack\u0027]/@size","elementContent":"\u003Cset xpath=\u0022/lootcontainers/lootcontainer[@name=\u0027playerBackpack\u0027]/@size\u0022\u003E12,12\u003C/set\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/lootcontainers","elementContent":"\u003Cappend xpath=\u0022/lootcontainers\u0022\u003E\r\n  \u003C!-- Large Wood Crate (120)--\u003E\r\n  \u003C!--Default Size = 8,6--\u003E\r\n  \u003Clootcontainer name=\u0022playerWoodWritableStorageLarge\u0022 count=\u00220\u0022 size=\u002212,10\u0022 sound_open=\u0022UseActions/crate_wood_open\u0022 sound_close=\u0022UseActions/crate_wood_close\u0022 loot_quality_template=\u0022qualBaseTemplate\u0022\u003E\r\n    \u003Citem name=\u0022cobweb\u0022 count=\u00220\u0022 /\u003E\r\n  \u003C/lootcontainer\u003E\r\n  \u003C!-- Large Iron Crate (144)--\u003E\r\n  \u003C!--Default Size = 8,8--\u003E\r\n  \u003Clootcontainer name=\u0022playerIronWritableStorageLarge\u0022 count=\u00220\u0022 size=\u002212,12\u0022 s..."},{"operation":"set","targetType":"perk","targetName":"perkPackMule","property":"CarryCapacity","xpath":"progression/perks/perk[@name=\u0027perkPackMule\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value","elementContent":"\u003Cset xpath=\u0022progression/perks/perk[@name=\u0027perkPackMule\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value\u0022\u003E7,14,21,28,36\u003C/set\u003E"},{"operation":"set","targetType":"book","targetName":"perkFiremansAlmanacComplete","property":"CarryCapacity","xpath":"progression/perks/book[@name=\u0027perkFiremansAlmanacComplete\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value","elementContent":"\u003Cset xpath=\u0022progression/perks/book[@name=\u0027perkFiremansAlmanacComplete\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value\u0022\u003E72\u003C/set\u003E"},{"operation":"set","targetType":"book","targetName":"perkNightStalkerThiefAdrenaline","property":"CarryCapacity","xpath":"progression/perks/book[@name=\u0027perkNightStalkerThiefAdrenaline\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value","elementContent":"\u003Cset xpath=\u0022progression/perks/book[@name=\u0027perkNightStalkerThiefAdrenaline\u0027]/effect_group/passive_effect[@name=\u0027CarryCapacity\u0027]/@value\u0022\u003E72\u003C/set\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/recipes","elementContent":"\u003Cappend xpath=\u0022/recipes\u0022\u003E\r\n  \u003Crecipe name=\u0022storageLargeWoodVariantHelper\u0022 count=\u00221\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceWood\u0022 count=\u002230\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n  \u003Crecipe name=\u0022storageLargeIronVariantHelper\u0022 count=\u00221\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceForgedIron\u0022 count=\u002230\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n  \u003Crecipe name=\u0022storageLargeSteelVariantHelper\u0022 count=\u00221\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceForgedSteel\u0022 count=\u002230\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n\u003C/append\u003E"}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"buff":5,"entity_class":2,"book":2,"perk":1,"loot_container":1},"topEntities":["entity_class:playerMale","book:perkFiremansAlmanacComplete","book:perkNightStalkerThiefAdrenaline","buff:buffDrugSteroids","buff:buffEncumberedInv","buff:god","buff:twitch_buffEncumbered","buff:twitch_buffPackMule","loot_container:playerBackpack","perk:perkPackMule"]},{"name":"AGF-V2-HUDPlus-1Main-v5.2.0","loadOrder":4,"folderName":"AGF-V2-HUDPlus-1Main-v5.2.0","modType":"XML","health":"Healthy","healthNote":"Has Config/ but no operations parsed","xmlOps":0,"csharpDeps":0,"removes":0,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"BellGoBong","loadOrder":5,"folderName":"BellGoBong","modType":"XML","health":"Healthy","healthNote":"XML: 3 appends on 1 entities","xmlOps":3,"csharpDeps":0,"removes":0,"oneLiner":"Modifies Buffs/Effects","features":[],"systems":["Buffs/Effects"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks/block[contains(@name, \u0027churchBell\u0027)]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[contains(@name, \u0027churchBell\u0027)]\u0022\u003E\r\n  \u003Cproperty name=\u0022Tags\u0022 value=\u0022bellBong\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"buff","targetName":"buffStatusCheck02","property":null,"xpath":"/buffs/buff[@name=\u0027buffStatusCheck02\u0027]","elementContent":"\u003Cappend xpath=\u0022/buffs/buff[@name=\u0027buffStatusCheck02\u0027]\u0022\u003E\r\n  \u003Ceffect_group\u003E\r\n    \u003Crequirement name=\u0022TriggerHasTags\u0022 tags=\u0022bellBong\u0022 /\u003E\r\n    \u003Ctriggered_effect trigger=\u0022onSelfDamagedBlock\u0022 action=\u0022PlaySound\u0022 sound=\u0022bellbongNew\u0022 /\u003E\r\n  \u003C/effect_group\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/Sounds","elementContent":"\u003Cappend xpath=\u0022/Sounds\u0022\u003E\r\n  \u003CSoundDataNode name=\u0022bellbongNew\u0022\u003E\r\n    \u003CAudioSource name=\u0022Sounds/AudioSource_Impact\u0022 /\u003E\r\n    \u003CNoise ID=\u00220\u0022 noise=\u002220\u0022 time=\u00223\u0022 muffled_when_crouched=\u00220.65\u0022 heat_map_strength=\u00220.03\u0022 heat_map_time=\u002245\u0022 /\u003E\r\n    \u003CAudioClip ClipName=\u0022#@modfolder:Resources/Bell.unity3d?BellBongNew\u0022 /\u003E\r\n    \u003CLowestPitch name=\u00220.9\u0022 /\u003E\r\n    \u003CHighestPitch name=\u00221.1\u0022 /\u003E\r\n    \u003CLocalCrouchVolumeScale value=\u00220.3\u0022 /\u003E\r\n    \u003CCrouchNoiseScale value=\u00220.5\u0022 /\u003E\r\n    \u003CNoiseScale value=\u00221\u0022 /\u003E\r\n    \u003CMaxVoice..."}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"buff":1},"topEntities":["buff:buffStatusCheck02"]},{"name":"BRDM2","loadOrder":6,"folderName":"BRDM2","modType":"XML","health":"Healthy","healthNote":"XML: 3 sets, 14 appends on 6 entities","xmlOps":17,"csharpDeps":0,"removes":0,"oneLiner":"Modifies Loot, Quests, Audio","features":[],"systems":["Loot","Quests","Audio","trader_item_group"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/buffs","elementContent":"\u003Cappend xpath=\u0022/buffs\u0022\u003E\r\n  \u003Cbuff name=\u0022buffVehicleArmorLow\u0022 hidden=\u0022true\u0022\u003E\r\n    \u003Cduration value=\u00220\u0022 /\u003E\r\n    \u003Cdamage_type value=\u0022heat\u0022 /\u003E\r\n    \u003Ceffect_group tiered=\u0022false\u0022\u003E\r\n      \u003Ctriggered_effect trigger=\u0022onSelfBuffUpdate\u0022 action=\u0022AddBuff\u0022 target=\u0022selfAOE\u0022 target_tags=\u0022player\u0022 range=\u0022.75\u0022 buff=\u0022buffVehicleArmorLowEffect\u0022 /\u003E\r\n    \u003C/effect_group\u003E\r\n  \u003C/buff\u003E\r\n  \u003Cbuff name=\u0022buffVehicleArmorLowEffect\u0022 hidden=\u0022true\u0022\u003E\r\n    \u003Cduration value=\u00223\u0022 /\u003E\r\n    \u003Cstack_type value=\u0022replace\u0022 /\u003E\r\n    \u003Ceffect_group t..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/entity_classes","elementContent":"\u003Cappend xpath=\u0022/entity_classes\u0022\u003E\r\n  \u003Centity_class name=\u0022vehicleBRDM2\u0022\u003E\r\n    \u003Cproperty name=\u0022Tags\u0022 value=\u0022vehicle,usesGas\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022EntityVJeep\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Parent\u0022 value=\u0022Cars\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Prefab\u0022 value=\u0022#@modfolder:Resources/BRDM1.unity3d?BRDM2.prefab\u0022 /\u003E\r\n    \u003Cproperty name=\u0022ModelType\u0022 value=\u0022Standard\u0022 /\u003E\r\n    \u003Cproperty name=\u0022SurfaceCategory\u0022 value=\u0022metal\u0022 /\u003E\r\n    \u003Cproperty name=\u0022IgnoreTrigger\u0022 value=\u0022true\u0022 /\u003E\r\n    \u003Cproperty name=\u0022LootListAl..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/items","elementContent":"\u003Cappend xpath=\u0022/items\u0022\u003E\r\n  \u003Citem name=\u0022vehicleBRDM2chassis\u0022\u003E\r\n    \u003Cproperty name=\u0022Extends\u0022 value=\u0022vehicleWheels\u0022 /\u003E\r\n    \u003Cproperty name=\u0022UnlockedBy\u0022 value=\u0022craftingVehicles\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022BRDM2chassis\u0022 /\u003E\r\n    \u003Cproperty name=\u0022DescriptionKey\u0022 value=\u0022vehicleBRDM2chassisDesc\u0022 /\u003E\r\n    \u003Cproperty name=\u0022EconomicValue\u0022 value=\u002212000\u0022 /\u003E\r\n    \u003Cproperty name=\u0022TraderStageTemplate\u0022 value=\u0022vehicleTier4\u0022 /\u003E\r\n  \u003C/item\u003E\r\n  \u003Citem name=\u0022vehicleBRDM2accessories\u0022\u003E\r\n    \u003Cproperty name=\u0022Ex..."},{"operation":"set","targetType":"loot_container","targetName":"[size=\u002712,10\u0027]","property":"size","xpath":"/lootcontainers/lootcontainer[@size=\u002712,10\u0027]/@size","elementContent":"\u003Cset xpath=\u0022/lootcontainers/lootcontainer[@size=\u002712,10\u0027]/@size\u0022\u003E5,24\u003C/set\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/lootcontainers","elementContent":"\u003Cappend xpath=\u0022/lootcontainers\u0022\u003E\r\n  \u003Clootcontainer name=\u0022BRDM\u0022 count=\u00220\u0022 size=\u002212,10\u0022 sound_open=\u0022UseActions/vehicle_storage_open\u0022 open_time=\u00220\u0022 sound_close=\u0022UseActions/vehicle_storage_close\u0022 loot_quality_template=\u0022qualBaseTemplate\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"loot_group","targetName":"vehiclePartsTiered","property":null,"xpath":"/lootcontainers/lootgroup[@name=\u0027vehiclePartsTiered\u0027]","elementContent":"\u003Cappend xpath=\u0022/lootcontainers/lootgroup[@name=\u0027vehiclePartsTiered\u0027]\u0022\u003E\r\n  \u003Citem group=\u0022BRDM2group\u0022 loot_prob_template=\u0022ProbT3\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"insertBefore","targetType":"loot_group","targetName":"groupScrapCommon","property":null,"xpath":"/lootcontainers/lootgroup[@name=\u0027groupScrapCommon\u0027]","elementContent":"\u003CinsertBefore xpath=\u0022/lootcontainers/lootgroup[@name=\u0027groupScrapCommon\u0027]\u0022\u003E\r\n  \u003Clootgroup name=\u0022BRDM2group\u0022\u003E\r\n    \u003Citem name=\u0022vehicleBRDM2chassis\u0022 /\u003E\r\n    \u003Citem name=\u0022vehicleBRDM2accessories\u0022 /\u003E\r\n    \u003Citem name=\u0022vehicleWheels\u0022 /\u003E\r\n    \u003Citem name=\u0022smallEngine\u0022 /\u003E\r\n    \u003Citem name=\u0022carBattery\u0022 /\u003E\r\n  \u003C/lootgroup\u003E\r\n  \u003Clootgroup name=\u0022groupQuestBRDMParts\u0022 count=\u0022all\u0022\u003E\r\n    \u003Citem name=\u0022questRewardBRDMPartsBundle\u0022 /\u003E\r\n  \u003C/lootgroup\u003E\r\n\u003C/insertBefore\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/nav_object_classes","elementContent":"\u003Cappend xpath=\u0022/nav_object_classes\u0022\u003E\r\n  \u003Cnav_object_class name=\u0022BRDM2\u0022 extends=\u0022bicycle\u0022\u003E\r\n    \u003Cproperty name=\u0022requirement_type\u0022 value=\u0022IsVehicleOwner\u0022 /\u003E\r\n    \u003Ccompass_settings\u003E\r\n      \u003Cproperty name=\u0022sprite_name\u0022 value=\u0022BRDM2UIicon\u0022 /\u003E\r\n    \u003C/compass_settings\u003E\r\n    \u003Conscreen_settings\u003E\r\n      \u003Cproperty name=\u0022sprite_name\u0022 value=\u0022BRDM2UIicon\u0022 /\u003E\r\n    \u003C/onscreen_settings\u003E\r\n  \u003C/nav_object_class\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":"item","xpath":"//crafting_skill[@name=\u0027craftingVehicles\u0027]/display_entry[@icon=\u0027vehicleGyrocopterPlaceable\u0027]/unlock_entry/@item","elementContent":"\u003Cappend xpath=\u0022//crafting_skill[@name=\u0027craftingVehicles\u0027]/display_entry[@icon=\u0027vehicleGyrocopterPlaceable\u0027]/unlock_entry/@item\u0022\u003E,vehicleBRDM2chassis,vehicleBRDM2accessories\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"//crafting_skill[@name=\u0027craftingVehicles\u0027]/effect_group","elementContent":"\u003Cappend xpath=\u0022//crafting_skill[@name=\u0027craftingVehicles\u0027]/effect_group\u0022\u003E\r\n  \u003Cpassive_effect name=\u0022RecipeTagUnlocked\u0022 operation=\u0022base_set\u0022 level=\u0022100,100\u0022 value=\u00221\u0022 tags=\u0022vehicleBRDM2chassis,vehicleBRDM2accessories\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"quest","targetName":"quest_tier5complete","property":null,"xpath":"/quests/quest[@id=\u0027quest_tier5complete\u0027]","elementContent":"\u003Cappend xpath=\u0022/quests/quest[@id=\u0027quest_tier5complete\u0027]\u0022\u003E\r\n  \u003Creward type=\u0022LootItem\u0022 id=\u0022groupQuestBRDMParts\u0022 ischosen=\u0022true\u0022 value=\u00226\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/recipes","elementContent":"\u003Cappend xpath=\u0022/recipes\u0022\u003E\r\n  \u003Crecipe name=\u0022vehicleBRDM2chassis\u0022 count=\u00221\u0022 craft_area=\u0022workbench\u0022 craft_time=\u0022230\u0022 tags=\u0022perkGreaseMonkey,learnable,workbenchCrafting\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceElectricParts\u0022 count=\u002220\u0022 /\u003E\r\n    \u003Cingredient name=\u0022resourceForgedSteel\u0022 count=\u0022300\u0022 /\u003E\r\n    \u003Cingredient name=\u0022resourceMechanicalParts\u0022 count=\u002250\u0022 /\u003E\r\n    \u003Cingredient name=\u0022resourceDuctTape\u0022 count=\u002240\u0022 /\u003E\r\n    \u003Cingredient name=\u0022resourceMetalPipe\u0022 count=\u002250\u0022 /\u003E\r\n    \u003Ceffect_group\u003E\r\n      \u003Cpassive_effec..."},{"operation":"set","targetType":"sound","targetName":"vwheel_bounce","property":"value","xpath":"/Sounds/SoundDataNode[@name=\u0027vwheel_bounce\u0027]/MaxRepeatRate/@value","elementContent":"\u003Cset xpath=\u0022/Sounds/SoundDataNode[@name=\u0027vwheel_bounce\u0027]/MaxRepeatRate/@value\u0022\u003E10\u003C/set\u003E"},{"operation":"set","targetType":"sound","targetName":"vwheel_bounce","property":"noise","xpath":"/Sounds/SoundDataNode[@name=\u0027vwheel_bounce\u0027]/Noise[@ID=\u00270\u0027]/@noise","elementContent":"\u003Cset xpath=\u0022/Sounds/SoundDataNode[@name=\u0027vwheel_bounce\u0027]/Noise[@ID=\u00270\u0027]/@noise\u0022\u003E10\u003C/set\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/Sounds","elementContent":"\u003Cappend xpath=\u0022/Sounds\u0022\u003E\r\n  \u003C!-- Heavy Duty Trucks --\u003E\r\n  \u003CSoundDataNode name=\u0022BRDM2_startup\u0022\u003E\r\n    \u003CAudioSource name=\u0022@:Sounds/Prefabs/AudioSource_Vehicle.prefab\u0022 /\u003E\r\n    \u003CNoise ID=\u00222\u0022 noise=\u002211\u0022 time=\u00223\u0022 muffled_when_crouched=\u00220.5\u0022 /\u003E\r\n    \u003CAudioClip ClipName=\u0022#@modfolder:Resources/BRDM2vehiclesounds4.unity3d?BRDM2startup\u0022 /\u003E\r\n    \u003CLocalCrouchVolumeScale value=\u00221.0\u0022 /\u003E\r\n    \u003CCrouchNoiseScale value=\u00220.5\u0022 /\u003E\r\n    \u003CNoiseScale value=\u00221\u0022 /\u003E\r\n    \u003CMaxVoices value=\u002210\u0022 /\u003E\r\n    \u003CMaxRepeatRate value=\u00220..."},{"operation":"append","targetType":"trader_item_group","targetName":"groupVehicles","property":null,"xpath":"/traders/trader_item_groups/trader_item_group[@name=\u0027groupVehicles\u0027]","elementContent":"\u003Cappend xpath=\u0022/traders/trader_item_groups/trader_item_group[@name=\u0027groupVehicles\u0027]\u0022\u003E\r\n  \u003Citem name=\u0022vehicleBRDM2chassis\u0022 /\u003E\r\n  \u003Citem name=\u0022vehicleBRDM2accessories\u0022 /\u003E\r\n  \u003Citem name=\u0022vehicleBRDM2placeable\u0022 /\u003E\r\n  \u003Citem name=\u0022vehicleBRDM2desertplaceable\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/vehicles","elementContent":"\u003Cappend xpath=\u0022/vehicles\u0022\u003E\r\n  \u003Cvehicle name=\u0022vehicleBRDM2\u0022\u003E\r\n    \u003Cproperty name=\u0022cameraDistance\u0022 value=\u00227.5, 7\u0022 /\u003E\r\n    \u003Cproperty name=\u0022cameraTurnRate\u0022 value=\u0022.2, .35\u0022 /\u003E\r\n    \u003Cproperty name=\u0022motorTorque_turbo\u0022 value=\u00224000, 1600, 5000, 2500\u0022 /\u003E\r\n    \u003Cproperty name=\u0022velocityMax_turbo\u0022 value=\u00229.5, 7, 13, 9\u0022 /\u003E\r\n    \u003Cproperty name=\u0022brakeTorque\u0022 value=\u00226000\u0022 /\u003E\r\n    \u003Cproperty name=\u0022upAngleMax\u0022 value=\u002270\u0022 /\u003E\r\n    \u003Cproperty name=\u0022upForce\u0022 value=\u00221\u0022 /\u003E\r\n    \u003Cproperty name=\u0022steerRate\u0022 value=\u0022120\u0022 /\u003E\r\n  ..."}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"sound":2,"loot_group":2,"trader_item_group":1,"quest":1,"loot_container":1},"topEntities":["sound:vwheel_bounce","loot_container:[size=\u002712,10\u0027]","loot_group:groupScrapCommon","loot_group:vehiclePartsTiered","quest:quest_tier5complete","trader_item_group:groupVehicles"]},{"name":"Extended World Settings","loadOrder":7,"folderName":"Extended World Settings","modType":"Config","health":"Healthy","healthNote":"Config only (no XML/DLL detected)","xmlOps":0,"csharpDeps":0,"removes":0,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":null},"operations":[],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"GrassBlocks","loadOrder":8,"folderName":"GrassBlocks","modType":"XML","health":"Healthy","healthNote":"XML: 2 appends on 0 entities","xmlOps":2,"csharpDeps":0,"removes":0,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003Cblock name=\u0022GrassBlock\u0022\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022Mdirt\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022ModelEntity\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Path\u0022 value=\u0022solid\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Model\u0022 value=\u0022#@modfolder:Resources/GB.unity3d?GrassBlock.prefab\u0022 /\u003E\r\n    \u003Cproperty name=\u0022ModelOffset\u0022 value=\u00220,0,0\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Place\u0022 value=\u0022TowardsPlacerInverted\u0022 /\u003E\r\n    \u003Cproperty name=\u0022OnlySimpleRotations\u0022 value=\u0022true\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Collide\u0022 value=\u0022moveme..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/recipes","elementContent":"\u003Cappend xpath=\u0022/recipes\u0022\u003E\r\n  \u003Crecipe name=\u0022GrassBlock\u0022 count=\u00221\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceClayLump\u0022 count=\u002216\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n  \u003Crecipe name=\u0022GrassBlock2\u0022 count=\u00221\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceClayLump\u0022 count=\u002216\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n  \u003Crecipe name=\u0022GrassBlock3\u0022 count=\u00221\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceClayLump\u0022 count=\u002216\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n  \u003Crecipe name=\u0022GrassBlock4\u0022 count=\u00221\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceClayLump\u0022 count=\u002216\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n\u003C/append\u003E"}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"Headshots Preferred","loadOrder":9,"folderName":"Headshots Preferred","modType":"XML","health":"Healthy","healthNote":"XML: 2 appends on 1 entities","xmlOps":2,"csharpDeps":0,"removes":0,"oneLiner":"Modifies Entities","features":[],"systems":["Entities"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":"entity_class","targetName":"playerMale","property":null,"xpath":"/entity_classes/entity_class[@name=\u0027playerMale\u0027]","elementContent":"\u003Cappend xpath=\u0022/entity_classes/entity_class[@name=\u0027playerMale\u0027]\u0022\u003E\r\n  \u003Ceffect_group name=\u0022lower_bodyshot_damage\u0022\u003E\r\n    \u003Cpassive_effect name=\u0022DamageModifier\u0022 operation=\u0022perc_add\u0022 value=\u0022-0.33\u0022\u003E\r\n      \u003Crequirement name=\u0022!HitLocation\u0022 body_parts=\u0022Head\u0022 /\u003E\r\n      \u003Crequirement name=\u0022EntityTagCompare\u0022 target=\u0022other\u0022 tags=\u0022zombie\u0022 /\u003E\r\n    \u003C/passive_effect\u003E\r\n  \u003C/effect_group\u003E\r\n  \u003C!-- Headshot Damage is 33% more than vanilla --\u003E\r\n  \u003Ceffect_group name=\u0022headshots_more_dmg\u0022\u003E\r\n    \u003Cpassive_effect name=\u0022Damag..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"//entity_class[starts-with(@name,\u0027zombieBurnt\u0027)]/effect_group","elementContent":"\u003Cappend xpath=\u0022//entity_class[starts-with(@name,\u0027zombieBurnt\u0027)]/effect_group\u0022\u003E\r\n  \u003Cpassive_effect name=\u0022BuffResistance\u0022 operation=\u0022base_set\u0022 value=\u0022100\u0022 tags=\u0022buffIsOnFire,buffBurningFlamingArrow,buffBurningMolotov,buffBurningElement\u0022 /\u003E\r\n\u003C/append\u003E"}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"entity_class":1},"topEntities":["entity_class:playerMale"]},{"name":"Marauder","loadOrder":10,"folderName":"Marauder","modType":"XML","health":"Healthy","healthNote":"XML: 2 sets, 13 appends on 5 entities","xmlOps":15,"csharpDeps":0,"removes":0,"oneLiner":"Modifies Loot, Quests, Audio","features":[],"systems":["Loot","Quests","Audio","trader_item_group"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/buffs","elementContent":"\u003Cappend xpath=\u0022/buffs\u0022\u003E\r\n  \u003Cbuff name=\u0022buffVehicleArmorLow\u0022 hidden=\u0022true\u0022\u003E\r\n    \u003Cduration value=\u00220\u0022 /\u003E\r\n    \u003Cdamage_type value=\u0022heat\u0022 /\u003E\r\n    \u003Ceffect_group tiered=\u0022false\u0022\u003E\r\n      \u003Ctriggered_effect trigger=\u0022onSelfBuffUpdate\u0022 action=\u0022AddBuff\u0022 target=\u0022selfAOE\u0022 target_tags=\u0022player\u0022 range=\u0022.75\u0022 buff=\u0022buffVehicleArmorLowEffect\u0022 /\u003E\r\n    \u003C/effect_group\u003E\r\n  \u003C/buff\u003E\r\n  \u003Cbuff name=\u0022buffVehicleArmorLowEffect\u0022 hidden=\u0022true\u0022\u003E\r\n    \u003Cduration value=\u00223\u0022 /\u003E\r\n    \u003Cstack_type value=\u0022replace\u0022 /\u003E\r\n    \u003Ceffect_group t..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/entity_classes","elementContent":"\u003Cappend xpath=\u0022/entity_classes\u0022\u003E\r\n  \u003Centity_class name=\u0022vehicleMarauder\u0022\u003E\r\n    \u003Cproperty name=\u0022Tags\u0022 value=\u0022vehicle,usesGas\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022EntityVJeep\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Parent\u0022 value=\u0022Cars\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Prefab\u0022 value=\u0022#@modfolder:Resources/Marauder1.unity3d?vehicleMarauder.prefab\u0022 /\u003E\r\n    \u003Cproperty name=\u0022ModelType\u0022 value=\u0022Standard\u0022 /\u003E\r\n    \u003Cproperty name=\u0022SurfaceCategory\u0022 value=\u0022metal\u0022 /\u003E\r\n    \u003Cproperty name=\u0022IgnoreTrigger\u0022 value=\u0022true\u0022 /\u003E\r\n    \u003Cproperty..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/items","elementContent":"\u003Cappend xpath=\u0022/items\u0022\u003E\r\n  \u003Citem name=\u0022vehicleMarauderchassis\u0022\u003E\r\n    \u003Cproperty name=\u0022Extends\u0022 value=\u0022vehicleWheels\u0022 /\u003E\r\n    \u003Cproperty name=\u0022UnlockedBy\u0022 value=\u0022craftingVehicles\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CustomIcon\u0022 value=\u0022Marauderchassis\u0022 /\u003E\r\n    \u003Cproperty name=\u0022DescriptionKey\u0022 value=\u0022vehicleMarauderchassisDesc\u0022 /\u003E\r\n    \u003Cproperty name=\u0022EconomicValue\u0022 value=\u002210000\u0022 /\u003E\r\n    \u003Cproperty name=\u0022TraderStageTemplate\u0022 value=\u0022vehicleTier4\u0022 /\u003E\r\n  \u003C/item\u003E\r\n  \u003Citem name=\u0022vehicleMarauderaccessories\u0022\u003E\r\n    \u003Cprope..."},{"operation":"append","targetType":"loot_group","targetName":"vehiclePartsTiered","property":null,"xpath":"/lootcontainers/lootgroup[@name=\u0027vehiclePartsTiered\u0027]","elementContent":"\u003Cappend xpath=\u0022/lootcontainers/lootgroup[@name=\u0027vehiclePartsTiered\u0027]\u0022\u003E\r\n  \u003Citem group=\u0022Maraudergroup\u0022 loot_prob_template=\u0022ProbT3\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"insertBefore","targetType":"loot_group","targetName":"groupScrapCommon","property":null,"xpath":"/lootcontainers/lootgroup[@name=\u0027groupScrapCommon\u0027]","elementContent":"\u003CinsertBefore xpath=\u0022/lootcontainers/lootgroup[@name=\u0027groupScrapCommon\u0027]\u0022\u003E\r\n  \u003Clootgroup name=\u0022Maraudergroup\u0022\u003E\r\n    \u003Citem name=\u0022vehicleMarauderchassis\u0022 /\u003E\r\n    \u003Citem name=\u0022vehicleMarauderaccessories\u0022 /\u003E\r\n    \u003Citem name=\u0022vehicleWheels\u0022 /\u003E\r\n    \u003Citem name=\u0022smallEngine\u0022 /\u003E\r\n    \u003Citem name=\u0022carBattery\u0022 /\u003E\r\n  \u003C/lootgroup\u003E\r\n  \u003Clootgroup name=\u0022groupQuestMarauderParts\u0022 count=\u0022all\u0022\u003E\r\n    \u003Citem name=\u0022questRewardMarauderPartsBundle\u0022 /\u003E\r\n  \u003C/lootgroup\u003E\r\n\u003C/insertBefore\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/nav_object_classes","elementContent":"\u003Cappend xpath=\u0022/nav_object_classes\u0022\u003E\r\n  \u003Cnav_object_class name=\u0022Marauder\u0022 extends=\u0022bicycle\u0022\u003E\r\n    \u003Cproperty name=\u0022requirement_type\u0022 value=\u0022IsVehicleOwner\u0022 /\u003E\r\n    \u003Ccompass_settings\u003E\r\n      \u003Cproperty name=\u0022sprite_name\u0022 value=\u0022MarauderUIicon\u0022 /\u003E\r\n    \u003C/compass_settings\u003E\r\n    \u003Conscreen_settings\u003E\r\n      \u003Cproperty name=\u0022sprite_name\u0022 value=\u0022MarauderUIicon\u0022 /\u003E\r\n    \u003C/onscreen_settings\u003E\r\n  \u003C/nav_object_class\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":"item","xpath":"//crafting_skill[@name=\u0027craftingVehicles\u0027]/display_entry[@icon=\u0027vehicleGyrocopterPlaceable\u0027]/unlock_entry/@item","elementContent":"\u003Cappend xpath=\u0022//crafting_skill[@name=\u0027craftingVehicles\u0027]/display_entry[@icon=\u0027vehicleGyrocopterPlaceable\u0027]/unlock_entry/@item\u0022\u003E,vehicleMarauderchassis,vehicleMarauderaccessories\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"//crafting_skill[@name=\u0027craftingVehicles\u0027]/effect_group","elementContent":"\u003Cappend xpath=\u0022//crafting_skill[@name=\u0027craftingVehicles\u0027]/effect_group\u0022\u003E\r\n  \u003Cpassive_effect name=\u0022RecipeTagUnlocked\u0022 operation=\u0022base_set\u0022 level=\u0022100,100\u0022 value=\u00221\u0022 tags=\u0022vehicleMarauderchassis,vehicleMarauderaccessories\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"quest","targetName":"quest_tier5complete","property":null,"xpath":"/quests/quest[@id=\u0027quest_tier5complete\u0027]","elementContent":"\u003Cappend xpath=\u0022/quests/quest[@id=\u0027quest_tier5complete\u0027]\u0022\u003E\r\n  \u003Creward type=\u0022LootItem\u0022 id=\u0022groupQuestMarauderParts\u0022 ischosen=\u0022true\u0022 value=\u00226\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/recipes","elementContent":"\u003Cappend xpath=\u0022/recipes\u0022\u003E\r\n  \u003Crecipe name=\u0022vehicleMarauderchassis\u0022 count=\u00221\u0022 craft_area=\u0022workbench\u0022 craft_time=\u0022230\u0022 tags=\u0022perkGreaseMonkey,learnable,workbenchCrafting\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceElectricParts\u0022 count=\u002220\u0022 /\u003E\r\n    \u003Cingredient name=\u0022resourceForgedSteel\u0022 count=\u0022250\u0022 /\u003E\r\n    \u003Cingredient name=\u0022resourceMechanicalParts\u0022 count=\u002250\u0022 /\u003E\r\n    \u003Cingredient name=\u0022resourceDuctTape\u0022 count=\u002240\u0022 /\u003E\r\n    \u003Cingredient name=\u0022resourceLeather\u0022 count=\u002250\u0022 /\u003E\r\n    \u003Ceffect_group\u003E\r\n      \u003Cpassive_effe..."},{"operation":"set","targetType":"sound","targetName":"vwheel_bounce","property":"value","xpath":"/Sounds/SoundDataNode[@name=\u0027vwheel_bounce\u0027]/MaxRepeatRate/@value","elementContent":"\u003Cset xpath=\u0022/Sounds/SoundDataNode[@name=\u0027vwheel_bounce\u0027]/MaxRepeatRate/@value\u0022\u003E10\u003C/set\u003E"},{"operation":"set","targetType":"sound","targetName":"vwheel_bounce","property":"noise","xpath":"/Sounds/SoundDataNode[@name=\u0027vwheel_bounce\u0027]/Noise[@ID=\u00270\u0027]/@noise","elementContent":"\u003Cset xpath=\u0022/Sounds/SoundDataNode[@name=\u0027vwheel_bounce\u0027]/Noise[@ID=\u00270\u0027]/@noise\u0022\u003E10\u003C/set\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/Sounds","elementContent":"\u003Cappend xpath=\u0022/Sounds\u0022\u003E\r\n  \u003C!-- Horns --\u003E\r\n  \u003CSoundDataNode name=\u0022Marauder_horn\u0022\u003E\r\n    \u003CAudioSource name=\u0022@:Sounds/Prefabs/AudioSource_SmallHorn.prefab\u0022 /\u003E\r\n    \u003CNoise ID=\u00224\u0022 noise=\u002260\u0022 time=\u00223\u0022 heat_map_strength=\u00220.2\u0022 heat_map_time=\u002290\u0022 /\u003E\r\n    \u003CAudioClip ClipName=\u0022#@modfolder:Resources/Marahorns1.unity3d?Maratruck_horn\u0022 /\u003E\r\n    \u003CLocalCrouchVolumeScale value=\u00221.0\u0022 /\u003E\r\n    \u003CCrouchNoiseScale value=\u00221\u0022 /\u003E\r\n    \u003CNoiseScale value=\u00221\u0022 /\u003E\r\n    \u003CMaxVoices value=\u00223\u0022 /\u003E\r\n    \u003CMaxEntities name=\u00226\u0022 /\u003E\r\n  ..."},{"operation":"append","targetType":"trader_item_group","targetName":"groupVehicles","property":null,"xpath":"/traders/trader_item_groups/trader_item_group[@name=\u0027groupVehicles\u0027]","elementContent":"\u003Cappend xpath=\u0022/traders/trader_item_groups/trader_item_group[@name=\u0027groupVehicles\u0027]\u0022\u003E\r\n  \u003Citem name=\u0022vehicleMarauderchassis\u0022 /\u003E\r\n  \u003Citem name=\u0022vehicleMarauderaccessories\u0022 /\u003E\r\n  \u003Citem name=\u0022vehicleMarauderplaceable\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/vehicles","elementContent":"\u003Cappend xpath=\u0022/vehicles\u0022\u003E\r\n  \u003Cvehicle name=\u0022vehicleMarauder\u0022\u003E\r\n    \u003Cproperty name=\u0022cameraDistance\u0022 value=\u00227.5, 7\u0022 /\u003E\r\n    \u003Cproperty name=\u0022cameraTurnRate\u0022 value=\u0022.2, .35\u0022 /\u003E\r\n    \u003Cproperty name=\u0022motorTorque_turbo\u0022 value=\u00222400, 1200, 3500, 1500\u0022 /\u003E\r\n    \u003Cproperty name=\u0022velocityMax_turbo\u0022 value=\u002212, 8, 16, 10\u0022 /\u003E\r\n    \u003Cproperty name=\u0022brakeTorque\u0022 value=\u00222000\u0022 /\u003E\r\n    \u003Cproperty name=\u0022upAngleMax\u0022 value=\u002270\u0022 /\u003E\r\n    \u003Cproperty name=\u0022upForce\u0022 value=\u00221\u0022 /\u003E\r\n    \u003Cproperty name=\u0022steerRate\u0022 value=\u0022160\u0022 /\u003E\r..."}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"sound":2,"loot_group":2,"trader_item_group":1,"quest":1},"topEntities":["sound:vwheel_bounce","loot_group:groupScrapCommon","loot_group:vehiclePartsTiered","quest:quest_tier5complete","trader_item_group:groupVehicles"]},{"name":"Nightmare Crawlers","loadOrder":11,"folderName":"Nightmare Crawlers","modType":"XML","health":"Healthy","healthNote":"XML: 3 sets, 1 appends on 1 entities","xmlOps":4,"csharpDeps":0,"removes":0,"oneLiner":"Modifies Entities","features":[],"systems":["Entities"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"set","targetType":"entity_class","targetName":"zombieSteveCrawlerFeral","property":"MoveSpeedAggro","xpath":"/entity_classes/entity_class[@name=\u0027zombieSteveCrawlerFeral\u0027]/property[@name=\u0027MoveSpeedAggro\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/entity_classes/entity_class[@name=\u0027zombieSteveCrawlerFeral\u0027]/property[@name=\u0027MoveSpeedAggro\u0027]/@value\u0022\u003E21, 22\u003C/set\u003E"},{"operation":"set","targetType":"entity_class","targetName":"zombieSteveCrawlerFeral","property":"HealthMax","xpath":"/entity_classes/entity_class[@name=\u0027zombieSteveCrawlerFeral\u0027]/effect_group[@name=\u0027Base Effects\u0027]/passive_effect[@name=\u0027HealthMax\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/entity_classes/entity_class[@name=\u0027zombieSteveCrawlerFeral\u0027]/effect_group[@name=\u0027Base Effects\u0027]/passive_effect[@name=\u0027HealthMax\u0027]/@value\u0022\u003E1200\u003C/set\u003E"},{"operation":"set","targetType":"entity_class","targetName":"zombieSteveCrawlerFeral","property":"ExperienceGain","xpath":"/entity_classes/entity_class[@name=\u0027zombieSteveCrawlerFeral\u0027]/property[@name=\u0027ExperienceGain\u0027]/@value","elementContent":"\u003Cset xpath=\u0022/entity_classes/entity_class[@name=\u0027zombieSteveCrawlerFeral\u0027]/property[@name=\u0027ExperienceGain\u0027]/@value\u0022\u003E1200\u003C/set\u003E"},{"operation":"append","targetType":"entity_class","targetName":"zombieSteveCrawlerFeral","property":null,"xpath":"/entity_classes/entity_class[@name=\u0027zombieSteveCrawlerFeral\u0027]","elementContent":"\u003Cappend xpath=\u0022/entity_classes/entity_class[@name=\u0027zombieSteveCrawlerFeral\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022WalkType\u0022 value=\u002222\u0022 /\u003E\r\n  \u003Cproperty name=\u0022LookAtAngle\u0022 value=\u00220\u0022 /\u003E\r\n\u003C/append\u003E"}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"entity_class":4},"topEntities":["entity_class:zombieSteveCrawlerFeral"]},{"name":"ProxiCraft","loadOrder":12,"folderName":"ProxiCraft","modType":"C#","health":"Healthy","healthNote":"C#: 39 game code patches","xmlOps":0,"csharpDeps":39,"removes":0,"oneLiner":"Patches ConnectionManager.ProcessPackages","features":["Patches ConnectionManager.ProcessPackages","Patches GameManager.StartGame","Patches GameManager.TELockServer","Patches GameManager.TEUnlockServer","Patches ItemActionEntryCraft.hasItems","Patches XUiC_RecipeList","Patches XUiC_RecipeCraftCount.calcMaxCraftable","Patches XUiC_IngredientEntry.GetBindingValueInternal","Patches XUiM_PlayerInventory.HasItems","Patches XUiM_PlayerInventory.RemoveItems"],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[],"patches":[{"className":"AnimatorRangedReloadState","methodName":"GetAmmoCountToReload","patchType":"Transpiler","codeSnippet":"public static IEnumerable\u003CCodeInstruction\u003E Transpiler(IEnumerable\u003CCodeInstruction\u003E instructions)\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.enableForReload)\r\n\t\t\t{\r\n\t\t\t\treturn instructions;\r\n\t\t\t}\r\n\t\t\treturn RobustTranspiler.SafeTranspile(instructions, \u0022ReloadAmmo\u0022, delegate(List\u003CCodeInstruction\u003E codes)\r\n\t\t\t{\r\n\t\t\t\t//IL_0090: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t\t//IL_009a: Expected O, but got Unknown\r\n\t\t\t\t//IL_00a5: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t\t//IL_00af: Expected O, but got Unknown\r\n\t\t\t\tbool result = false;\r\n\t\t\t\tforeach (int item in RobustTranspiler.FindAllMethodCalls(codes, typeof(Inventory), \u0022GetItemCount\u0022, new Type[5]\r\n\t\t\t\t{\r\n\t\t\t\t\ttypeof(ItemValue),\r\n\t\t\t\t\ttypeof(bool),\r\n\t\t\t\t\ttypeof(int),\r\n\t\t\t\t\ttypeof(int),\r\n\t\t\t\t\ttypeof(bool)\r\n\t\t\t\t}))\r\n\t\t\t\t{\r\n\t\t\t\t\tMethodInfo methodInfo = AccessTools.Method(typeof(ProxiCraft), \u0022AddReloadContainerCount\u0022, (Type[])null, (Type[])null);\r\n\t\t\t\t\tcodes.Insert(item \u002B 1, new CodeInstruction(OpCodes.Ldarg_2, (object)null));\r\n\t\t\t\t\tcodes.Insert(item \u002B 2, new CodeInstruction(OpCodes.Call, (object)methodInfo));\r\n\t\t\t\t\tLogDebug(string.Format(\u0022[{0}] Injected after GetItemCount at IL index {1}\u0022, \u0022ReloadAmmo\u0022, item));\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t}\r\n\t\t\t\tMethodInfo operand = AccessTools.Method(typeof(ProxiCraft), \u0022DecItemForReload\u0022, (Type[])null, (Type[])null);\r\n\t\t\t\tRobustTranspiler.FindAllMethodCalls(codes, typeof(Inventory), \u0022DecItem\u0022);\r\n\t\t\t\tfor (int i = 0; i \u003C codes.Count; i\u002B\u002B)\r\n\t\t\t\t{\r\n\t\t\t\t\tif ((codes[i].opcode == OpCodes.Call || codes[i].opcode == OpCodes.Callvirt) \u0026\u0026 codes[i].operand is MethodInfo methodInfo2 \u0026\u0026 methodInfo2.DeclaringType == typeof(Inventory) \u0026\u0026 methodInfo2.Name == \u0022DecItem\u0022)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcodes[i].operand = operand;\r\n\t\t\t\t\t\tcodes[i].opcode = OpCodes.Call;\r\n\t\t\t\t\t\tLogDebug(string.Format(\u0022[{0}] Replaced DecItem at IL index {1}\u0022, \u0022ReloadAmmo\u0022, i));\r\n\t\t\t\t\t\tresult = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t});\r\n\t\t}"},{"className":"Bag","methodName":"AddItem","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config == null || config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\tContainerManager.InvalidateCache();\r\n\t\t\t\tMarkHudAmmoDirty();\r\n\t\t\t\tRefreshRecipeTracker();\r\n\t\t\t}\r\n\t\t}"},{"className":"Bag","methodName":"DecItem","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config == null || config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\tContainerManager.InvalidateCache();\r\n\t\t\t\tMarkHudAmmoDirty();\r\n\t\t\t}\r\n\t\t}"},{"className":"ConnectionManager","methodName":"ProcessPackages","patchType":"Prefix","codeSnippet":"[HarmonyPrefix]\r\n\tpublic static void Prefix(List\u003CNetPackage\u003E ___packagesToProcess)\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tif (___packagesToProcess == null || ___packagesToProcess.Count == 0)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tforeach (NetPackage item in ___packagesToProcess)\r\n\t\t\t{\r\n\t\t\t\tif (item != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tNetworkDiagnostics.OnPacketObserved(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch\r\n\t\t{\r\n\t\t}\r\n\t}"},{"className":"EntityVehicle","methodName":"hasGasCan","patchType":"Postfix","codeSnippet":"public static void Postfix(EntityVehicle __instance, EntityAlive _ea, ref bool __result)\r\n\t\t{\r\n\t\t\tif (__result)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif (config2 != null \u0026\u0026 !config2.enableForRefuel)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tVehicle vehicle = __instance.GetVehicle();\r\n\t\t\t\tstring text = ((vehicle != null) ? vehicle.GetFuelItem() : null);\r\n\t\t\t\tif (string.IsNullOrEmpty(text))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tItemValue item = ItemClass.GetItem(text, false);\r\n\t\t\t\tint itemCount;\r\n\t\t\t\tif (Config.enhancedSafetyRefuel)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!MultiplayerModTracker.IsModAllowed())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tLogDebug(\u0022hasGasCan (enhanced): MP locked, skipping storage check\u0022);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\titemCount = ContainerManager.GetItemCount(Config, item);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\titemCount = ContainerManager.GetItemCount(Config, item);\r\n\t\t\t\t}\r\n\t\t\t\tif (itemCount \u003E 0)\r\n\t\t\t\t{\r\n\t\t\t\t\t__result = true;\r\n\t\t\t\t\tLogDebug($\u0022Found {itemCount} fuel in containers\u0022);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error checking fuel in containers: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"EntityVehicle","methodName":"takeFuel","patchType":"Transpiler","codeSnippet":"public static IEnumerable\u003CCodeInstruction\u003E Transpiler(IEnumerable\u003CCodeInstruction\u003E instructions)\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.enableForRefuel)\r\n\t\t\t{\r\n\t\t\t\treturn instructions;\r\n\t\t\t}\r\n\t\t\treturn RobustTranspiler.SafeTranspile(instructions, \u0022VehicleRefuel\u0022, delegate(List\u003CCodeInstruction\u003E codes)\r\n\t\t\t{\r\n\t\t\t\tMethodInfo replacementMethod = AccessTools.Method(typeof(ProxiCraft), \u0022DecItemForRefuel\u0022, (Type[])null, (Type[])null);\r\n\t\t\t\treturn RobustTranspiler.TryReplaceMethodCall(codes, typeof(Bag), \u0022DecItem\u0022, replacementMethod, \u0022VehicleRefuel\u0022, null, 1, new string[4] { \u0022Dec\u0022, \u0022Remove\u0022, \u0022Subtract\u0022, \u0022Consume\u0022 });\r\n\t\t\t});\r\n\t\t}"},{"className":"GameManager","methodName":"StartGame","patchType":"Prefix","codeSnippet":"public static void Prefix()\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tContainerManager.ClearCache();\r\n\t\t\t\tLogDebug(\u0022Container cache cleared for new game\u0022);\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error clearing cache: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"GameManager","methodName":"TELockServer","patchType":"Postfix","codeSnippet":"public static void Postfix(GameManager __instance, int _clrIdx, Vector3i _blockPos, int _lootEntityId)\r\n\t\t{\r\n\t\t\t//IL_0033: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0052: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_005c: Expected O, but got Unknown\r\n\t\t\t//IL_0063: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0078: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0086: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00a3: Expected O, but got Unknown\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (SingletonMonoBehaviour\u003CConnectionManager\u003E.Instance.IsServer)\r\n\t\t\t\t{\r\n\t\t\t\t\tTileEntity val = ((_lootEntityId != -1) ? __instance.m_World.GetTileEntity(_lootEntityId) : ((WorldBase)__instance.m_World).GetTileEntity(_blockPos));\r\n\t\t\t\t\tif (val != null \u0026\u0026 __instance.lockedTileEntities.ContainsKey((ITileEntity)val))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tLogDebug($\u0022Broadcasting container lock at {_blockPos}\u0022);\r\n\t\t\t\t\t\tNetPackagePCLock netPackagePCLock = NetPackageManager.GetPackage\u003CNetPackagePCLock\u003E().Setup(_blockPos, _unlock: false);\r\n\t\t\t\t\t\tSingletonMonoBehaviour\u003CConnectionManager\u003E.Instance.SendPackage((NetPackage)netPackagePCLock, true, -1, -1, -1, (Vector3?)null, 192, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error in TELockServer patch: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"GameManager","methodName":"TEUnlockServer","patchType":"Postfix","codeSnippet":"public static void Postfix(GameManager __instance, int _clrIdx, Vector3i _blockPos, int _lootEntityId)\r\n\t\t{\r\n\t\t\t//IL_0033: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0052: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_005c: Expected O, but got Unknown\r\n\t\t\t//IL_0063: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0078: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0086: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00a3: Expected O, but got Unknown\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (SingletonMonoBehaviour\u003CConnectionManager\u003E.Instance.IsServer)\r\n\t\t\t\t{\r\n\t\t\t\t\tTileEntity val = ((_lootEntityId != -1) ? __instance.m_World.GetTileEntity(_lootEntityId) : ((WorldBase)__instance.m_World).GetTileEntity(_blockPos));\r\n\t\t\t\t\tif (val != null \u0026\u0026 !__instance.lockedTileEntities.ContainsKey((ITileEntity)val))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tLogDebug($\u0022Broadcasting container unlock at {_blockPos}\u0022);\r\n\t\t\t\t\t\tNetPackagePCLock netPackagePCLock = NetPackageManager.GetPackage\u003CNetPackagePCLock\u003E().Setup(_blockPos, _unlock: true);\r\n\t\t\t\t\t\tSingletonMonoBehaviour\u003CConnectionManager\u003E.Instance.SendPackage((NetPackage)netPackagePCLock, true, -1, -1, -1, (Vector3?)null, 192, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error in TEUnlockServer patch: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"Inventory","methodName":"DecItem","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config == null || config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\tContainerManager.InvalidateCache();\r\n\t\t\t\tMarkHudAmmoDirty();\r\n\t\t\t}\r\n\t\t}"},{"className":"ItemActionEntryCraft","methodName":"hasItems","patchType":"Transpiler","codeSnippet":"public static IEnumerable\u003CCodeInstruction\u003E Transpiler(IEnumerable\u003CCodeInstruction\u003E instructions, ILGenerator generator)\r\n\t\t{\r\n\t\t\tif (AdaptivePatching.HasTranspilerConflict(AccessTools.Method(typeof(ItemActionEntryCraft), \u0022hasItems\u0022, (Type[])null, (Type[])null)))\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022ItemActionEntryCraft.hasItems has Transpiler conflict - using fallback\u0022);\r\n\t\t\t\tRobustTranspiler.RecordTranspilerStatus(\u0022CraftHasItems\u0022, success: false);\r\n\t\t\t\treturn instructions;\r\n\t\t\t}\r\n\t\t\treturn RobustTranspiler.SafeTranspile(instructions, \u0022CraftHasItems\u0022, delegate(List\u003CCodeInstruction\u003E codes)\r\n\t\t\t{\r\n\t\t\t\tMethodInfo injectedMethod = AccessTools.Method(typeof(ProxiCraft), \u0022AddContainerItems\u0022, (Type[])null, (Type[])null);\r\n\t\t\t\treturn RobustTranspiler.TryInjectAfterMethodCall(codes, typeof(XUiM_PlayerInventory), \u0022GetAllItemStacks\u0022, injectedMethod, \u0022CraftHasItems\u0022);\r\n\t\t\t});\r\n\t\t}"},{"className":"ItemActionEntryPurchase","methodName":"RefreshEnabled","patchType":"Transpiler","codeSnippet":"public static IEnumerable\u003CCodeInstruction\u003E Transpiler(IEnumerable\u003CCodeInstruction\u003E instructions)\r\n\t\t{\r\n\t\t\t//IL_00c0: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00ca: Expected O, but got Unknown\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.enableForTrader)\r\n\t\t\t{\r\n\t\t\t\treturn instructions;\r\n\t\t\t}\r\n\t\t\tList\u003CCodeInstruction\u003E list = new List\u003CCodeInstruction\u003E(instructions);\r\n\t\t\tMethodInfo methodInfo = AccessTools.Method(typeof(XUiM_PlayerInventory), \u0022GetItemCount\u0022, new Type[1] { typeof(ItemValue) }, (Type[])null);\r\n\t\t\tfor (int i = 0; i \u003C list.Count; i\u002B\u002B)\r\n\t\t\t{\r\n\t\t\t\tif ((list[i].opcode == OpCodes.Call || list[i].opcode == OpCodes.Callvirt) \u0026\u0026 list[i].operand is MethodInfo methodInfo2 \u0026\u0026 methodInfo2 == methodInfo)\r\n\t\t\t\t{\r\n\t\t\t\t\tMethodInfo methodInfo3 = AccessTools.Method(typeof(ProxiCraft), \u0022AddCurrencyContainerCount\u0022, (Type[])null, (Type[])null);\r\n\t\t\t\t\tlist.Insert(i \u002B 1, new CodeInstruction(OpCodes.Call, (object)methodInfo3));\r\n\t\t\t\t\tLogDebug(\u0022Patched ItemActionEntryPurchase.RefreshEnabled\u0022);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn list.AsEnumerable();\r\n\t\t}"},{"className":"ItemActionRanged","methodName":"CanReload","patchType":"Postfix","codeSnippet":"public static void Postfix(ItemActionRanged __instance, ItemActionData _actionData, ref bool __result)\r\n\t\t{\r\n\t\t\tif (__result)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif ((config2 != null \u0026\u0026 !config2.enableForReload) || !IsGameReady())\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tItemValue holdingItemItemValue = _actionData.invData.holdingEntity.inventory.holdingItemItemValue;\r\n\t\t\t\tItemValue item = ItemClass.GetItem(((ItemActionAttack)__instance).MagazineItemNames[holdingItemItemValue.SelectedAmmoTypeIndex], false);\r\n\t\t\t\tint num3;\r\n\t\t\t\tif (Config.enhancedSafetyReload)\r\n\t\t\t\t{\r\n\t\t\t\t\tGameManager instance = GameManager.Instance;\r\n\t\t\t\t\tobject obj;\r\n\t\t\t\t\tif (instance == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tobj = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tWorld world = instance.World;\r\n\t\t\t\t\t\tobj = ((world != null) ? ((WorldBase)world).GetPrimaryPlayer() : null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tEntityPlayerLocal val = (EntityPlayerLocal)obj;\r\n\t\t\t\t\tint totalItemCount = VirtualInventoryProvider.GetTotalItemCount(val, item);\r\n\t\t\t\t\tint? obj2;\r\n\t\t\t\t\tif (val == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tobj2 = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tBag bag = ((EntityAlive)val).bag;\r\n\t\t\t\t\t\tobj2 = ((bag != null) ? new int?(bag.GetItemCount(item, -1, -1, true)) : ((int?)null));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tint? num = obj2;\r\n\t\t\t\t\tint valueOrDefault = num.GetValueOrDefault();\r\n\t\t\t\t\tint num2 = valueOrDefault;\r\n\t\t\t\t\tint? obj3;\r\n\t\t\t\t\tif (val == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tobj3 = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tInventory inventory = ((EntityAlive)val).inventory;\r\n\t\t\t\t\t\tobj3 = ((inventory != null) ? new int?(inventory.GetItemCount(item, false, -1, -1, true)) : ((int?)null));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnum = obj3;\r\n\t\t\t\t\tvalueOrDefault = num2 \u002B num.GetValueOrDefault();\r\n\t\t\t\t\tnum3 = totalItemCount - valueOrDefault;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tnum3 = ContainerManager.GetItemCount(Config, item);\r\n\t\t\t\t}\r\n\t\t\t\tif (num3 \u003E 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tobject arg = num3;\r\n\t\t\t\t\tItemClass itemClass = item.ItemClass;\r\n\t\t\t\t\tLogDebug($\u0022CanReload: Found {arg} {((itemClass != null) ? itemClass.GetItemName() : null)} in containers - allowing reload\u0022);\r\n\t\t\t\t\t__result = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error in CanReload Postfix: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"ItemActionRepair","methodName":"CanRemoveRequiredResource","patchType":"Postfix","codeSnippet":"public static void Postfix(ItemActionRepair __instance, ref bool __result, ItemInventoryData data, BlockValue blockValue)\r\n\t\t{\r\n\t\t\tif (__result)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif (config2 != null \u0026\u0026 !config2.enableForRepairAndUpgrade)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tBlock block = ((BlockValue)(ref blockValue)).Block;\r\n\t\t\t\tif (block == null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tstring upgradeItemName = GetUpgradeItemName(__instance, block);\r\n\t\t\t\tif (string.IsNullOrEmpty(upgradeItemName) || !int.TryParse(block.Properties.Values[Block.PropUpgradeBlockClassItemCount], out var result))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tItemValue item = ItemClass.GetItem(upgradeItemName, false);\r\n\t\t\t\tif (item == null || item.IsEmpty())\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tint num = 0;\r\n\t\t\t\tif ((Object)(object)data?.holdingEntity != (Object)null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint num2 = num;\r\n\t\t\t\t\tInventory inventory = data.holdingEntity.inventory;\r\n\t\t\t\t\tnum = num2 \u002B ((inventory != null) ? inventory.GetItemCount(item, false, -1, -1, true) : 0);\r\n\t\t\t\t\tint num3 = num;\r\n\t\t\t\t\tBag bag = data.holdingEntity.bag;\r\n\t\t\t\t\tnum = num3 \u002B ((bag != null) ? bag.GetItemCount(item, -1, -1, true) : 0);\r\n\t\t\t\t}\r\n\t\t\t\tint itemCount;\r\n\t\t\t\tif (Config.enhancedSafetyRepair)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!MultiplayerModTracker.IsModAllowed())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tLogDebug(\u0022CanRemoveRequiredResource (enhanced): MP locked, skipping storage check\u0022);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\titemCount = ContainerManager.GetItemCount(Config, item);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\titemCount = ContainerManager.GetItemCount(Config, item);\r\n\t\t\t\t}\r\n\t\t\t\tif (num \u002B itemCount \u003E= result)\r\n\t\t\t\t{\r\n\t\t\t\t\t__result = true;\r\n\t\t\t\t\tLogDebug($\u0022CanRemoveRequiredResource: {upgradeItemName} x{result}, player={num}, containers={itemCount} -\u003E allowed\u0022);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error in CanRemoveRequiredResource patch: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"ItemActionRepair","methodName":"RemoveRequiredResource","patchType":"Postfix","codeSnippet":"public static void Postfix(ItemActionRepair __instance, ref bool __result, ItemInventoryData data, BlockValue blockValue)\r\n\t\t{\r\n\t\t\t//IL_024e: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0259: Expected O, but got Unknown\r\n\t\t\tif (__result)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif (config2 != null \u0026\u0026 !config2.enableForRepairAndUpgrade)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (Config.enhancedSafetyRepair \u0026\u0026 !MultiplayerModTracker.IsModAllowed())\r\n\t\t\t{\r\n\t\t\t\tLogDebug(\u0022RemoveRequiredResource (enhanced): MP locked, skipping storage removal\u0022);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tBlock block = ((BlockValue)(ref blockValue)).Block;\r\n\t\t\t\tif (block == null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tstring upgradeItemName = GetUpgradeItemName(block);\r\n\t\t\t\tif (string.IsNullOrEmpty(upgradeItemName) || !int.TryParse(block.Properties.Values[Block.PropUpgradeBlockClassItemCount], out var result))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tItemValue item = ItemClass.GetItem(upgradeItemName, false);\r\n\t\t\t\tif (item == null || item.IsEmpty())\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tint? obj;\r\n\t\t\t\tif (data == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tEntityAlive holdingEntity = data.holdingEntity;\r\n\t\t\t\t\tif (holdingEntity == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tobj = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tInventory inventory = holdingEntity.inventory;\r\n\t\t\t\t\t\tobj = ((inventory != null) ? new int?(inventory.GetItemCount(item, false, -1, -1, true)) : ((int?)null));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tint? num = obj;\r\n\t\t\t\tint valueOrDefault = num.GetValueOrDefault();\r\n\t\t\t\tint? obj2;\r\n\t\t\t\tif (data == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj2 = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tEntityAlive holdingEntity2 = data.holdingEntity;\r\n\t\t\t\t\tif (holdingEntity2 == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tobj2 = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tBag bag = holdingEntity2.bag;\r\n\t\t\t\t\t\tobj2 = ((bag != null) ? new int?(bag.GetItemCount(item, -1, -1, true)) : ((int?)null));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnum = obj2;\r\n\t\t\t\tint valueOrDefault2 = num.GetValueOrDefault();\r\n\t\t\t\tint num2 = valueOrDefault \u002B valueOrDefault2;\r\n\t\t\t\tint itemCount = ContainerManager.GetItemCount(Config, item);\r\n\t\t\t\tif (num2 \u002B itemCount \u003C result)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tint num3 = result;\r\n\t\t\t\tif (num3 \u003E 0 \u0026\u0026 data?.holdingEntity?.inventory != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint num4 = data.holdingEntity.inventory.DecItem(item, num3, false, (IList\u003CItemStack\u003E)null);\r\n\t\t\t\t\tnum3 -= num4;\r\n\t\t\t\t}\r\n\t\t\t\tif (num3 \u003E 0 \u0026\u0026 data?.holdingEntity?.bag != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tint num5 = data.holdingEntity.bag.DecItem(item, num3, false, (IList\u003CItemStack\u003E)null);\r\n\t\t\t\t\tnum3 -= num5;\r\n\t\t\t\t}\r\n\t\t\t\tif (num3 \u003E 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tint num6 = ContainerManager.RemoveItems(Config, item, num3);\r\n\t\t\t\t\tnum3 -= num6;\r\n\t\t\t\t\tLogDebug($\u0022RemoveRequiredResource: Removed {num6} {upgradeItemName} from containers (needed {result})\u0022);\r\n\t\t\t\t}\r\n\t\t\t\tif (num3 \u003C= 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tEntityAlive obj3 = data?.holdingEntity;\r\n\t\t\t\t\tEntityPlayerLocal val = (EntityPlayerLocal)(object)((obj3 is EntityPlayerLocal) ? obj3 : null);\r\n\t\t\t\t\tif ((Object)(object)val != (Object)null \u0026\u0026 result != 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t((Entity)val).AddUIHarvestingItem(new ItemStack(item, -result), false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t__result = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error in RemoveRequiredResource patch: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"ItemActionTextureBlock","methodName":"checkAmmo","patchType":"Prefix","codeSnippet":"public static bool Prefix(ItemActionTextureBlock __instance, ItemActionData _actionData, ref bool __result)\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config == null || config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\tModConfig config2 = Config;\r\n\t\t\t\tif (config2 == null || config2.enableForPainting)\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (((ItemActionAttack)__instance).InfiniteAmmo || GameStats.GetInt((EnumGameStats)1) == 2 || GameStats.GetInt((EnumGameStats)1) == 8)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t__result = true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tItemValue currentMagazineItem = __instance.currentMagazineItem;\r\n\t\t\t\t\t\tif (currentMagazineItem == null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tEntityAlive holdingEntity = _actionData.invData.holdingEntity;\r\n\t\t\t\t\t\tBag bag = holdingEntity.bag;\r\n\t\t\t\t\t\tint num = ((bag != null) ? bag.GetItemCount(currentMagazineItem, -1, -1, true) : 0);\r\n\t\t\t\t\t\tInventory inventory = holdingEntity.inventory;\r\n\t\t\t\t\t\tint num2 = ((inventory != null) ? inventory.GetItemCount(currentMagazineItem, false, -1, -1, true) : 0);\r\n\t\t\t\t\t\tint num3 = num \u002B num2;\r\n\t\t\t\t\t\tif (num3 \u003E 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t__result = true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tint itemCount = ContainerManager.GetItemCount(Config, currentMagazineItem);\r\n\t\t\t\t\t\t__result = itemCount \u003E 0;\r\n\t\t\t\t\t\tobject[] array = new object[4];\r\n\t\t\t\t\t\tItemClass itemClass = currentMagazineItem.ItemClass;\r\n\t\t\t\t\t\tarray[0] = ((itemClass != null) ? itemClass.GetItemName() : null);\r\n\t\t\t\t\t\tarray[1] = num3;\r\n\t\t\t\t\t\tarray[2] = itemCount;\r\n\t\t\t\t\t\tarray[3] = __result;\r\n\t\t\t\t\t\tLogDebug(string.Format(\u0022checkAmmo: Paint={0}, entity={1}, containers={2}, result={3}\u0022, array));\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (Exception ex)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tLogWarning(\u0022Error in checkAmmo patch: \u0022 \u002B ex.Message);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}"},{"className":"ItemActionTextureBlock","methodName":"decreaseAmmo","patchType":"Prefix","codeSnippet":"public static bool Prefix(ItemActionTextureBlock __instance, ItemActionData _actionData, ref bool __result)\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config == null || config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\tModConfig config2 = Config;\r\n\t\t\t\tif (config2 == null || config2.enableForPainting)\r\n\t\t\t\t{\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (((ItemActionAttack)__instance).InfiniteAmmo || GameStats.GetInt((EnumGameStats)1) == 2 || GameStats.GetInt((EnumGameStats)1) == 8)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t__result = true;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tItemActionTextureBlockData val = (ItemActionTextureBlockData)(object)((_actionData is ItemActionTextureBlockData) ? _actionData : null);\r\n\t\t\t\t\t\tif (val == null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tint paintCost = BlockTextureData.list[val.idx].PaintCost;\r\n\t\t\t\t\t\tEntityAlive holdingEntity = _actionData.invData.holdingEntity;\r\n\t\t\t\t\t\tItemValue currentMagazineItem = __instance.currentMagazineItem;\r\n\t\t\t\t\t\tBag bag = holdingEntity.bag;\r\n\t\t\t\t\t\tint num = ((bag != null) ? bag.GetItemCount(currentMagazineItem, -1, -1, true) : 0);\r\n\t\t\t\t\t\tInventory inventory = holdingEntity.inventory;\r\n\t\t\t\t\t\tint num2 = ((inventory != null) ? inventory.GetItemCount(currentMagazineItem, false, -1, -1, true) : 0);\r\n\t\t\t\t\t\tint num3 = num \u002B num2;\r\n\t\t\t\t\t\tint itemCount = ContainerManager.GetItemCount(Config, currentMagazineItem);\r\n\t\t\t\t\t\tif (num3 \u002B itemCount \u003C paintCost)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t__result = false;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tint num4 = paintCost;\r\n\t\t\t\t\t\tif (num4 \u003E 0 \u0026\u0026 holdingEntity.bag != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum4 -= holdingEntity.bag.DecItem(currentMagazineItem, num4, false, (IList\u003CItemStack\u003E)null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (num4 \u003E 0 \u0026\u0026 holdingEntity.inventory != null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum4 -= holdingEntity.inventory.DecItem(currentMagazineItem, num4, false, (IList\u003CItemStack\u003E)null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (num4 \u003E 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tint num5 = ContainerManager.RemoveItems(Config, currentMagazineItem, num4);\r\n\t\t\t\t\t\t\tLogDebug($\u0022decreaseAmmo: Removed {num5} paint from containers (needed {num4})\u0022);\r\n\t\t\t\t\t\t\tnum4 -= num5;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t__result = num4 \u003C= 0;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (Exception ex)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tLogWarning(\u0022Error in decreaseAmmo patch: \u0022 \u002B ex.Message);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}"},{"className":"XUiC_HUDStatBar","methodName":"updateActiveItemAmmo","patchType":"Postfix","codeSnippet":"public static void Postfix(XUiC_HUDStatBar __instance)\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif ((config2 != null \u0026\u0026 !config2.enableHudAmmoCounter) || !IsGameReady())\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (!_fieldsInitialized)\r\n\t\t\t\t{\r\n\t\t\t\t\t_fieldsInitialized = true;\r\n\t\t\t\t\t_activeAmmoField = typeof(XUiC_HUDStatBar).GetField(\u0022activeAmmoItemValue\u0022, BindingFlags.Instance | BindingFlags.Public);\r\n\t\t\t\t\tif (_activeAmmoField == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_activeAmmoField = typeof(XUiC_HUDStatBar).GetField(\u0022activeAmmoItemValue\u0022, BindingFlags.Instance | BindingFlags.NonPublic);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_ammoCountField = typeof(XUiC_HUDStatBar).GetField(\u0022currentAmmoCount\u0022, BindingFlags.Instance | BindingFlags.Public);\r\n\t\t\t\t\tif (_ammoCountField == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t_ammoCountField = typeof(XUiC_HUDStatBar).GetField(\u0022currentAmmoCount\u0022, BindingFlags.Instance | BindingFlags.NonPublic);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tFileLogInternal($\u0022HUD ammo patch: activeAmmoField={_activeAmmoField != null}, ammoCountField={_ammoCountField != null}\u0022);\r\n\t\t\t\t}\r\n\t\t\t\tif (_activeAmmoField == null || _ammoCountField == null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tobject value = _activeAmmoField.GetValue(__instance);\r\n\t\t\t\tItemValue val = (ItemValue)((value is ItemValue) ? value : null);\r\n\t\t\t\tif (val != null \u0026\u0026 val.type != 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tint num = (int)_ammoCountField.GetValue(__instance);\r\n\t\t\t\t\tint itemCount = ContainerManager.GetItemCount(Config, val);\r\n\t\t\t\t\tif (itemCount \u003E 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tint num2 = AdaptivePatching.SafeAddCount(num, itemCount);\r\n\t\t\t\t\t\t_ammoCountField.SetValue(__instance, num2);\r\n\t\t\t\t\t\tobject[] array = new object[4];\r\n\t\t\t\t\t\tItemClass itemClass = val.ItemClass;\r\n\t\t\t\t\t\tarray[0] = ((itemClass != null) ? itemClass.GetItemName() : null);\r\n\t\t\t\t\t\tarray[1] = num;\r\n\t\t\t\t\t\tarray[2] = itemCount;\r\n\t\t\t\t\t\tarray[3] = num2;\r\n\t\t\t\t\t\tLogDebug(string.Format(\u0022HUD ammo: {0} = {1} inventory \u002B {2} containers = {3}\u0022, array));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogDebug(\u0022HUD ammo patch error: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_IngredientEntry","methodName":"GetBindingValueInternal","patchType":"Transpiler","codeSnippet":"public static IEnumerable\u003CCodeInstruction\u003E Transpiler(IEnumerable\u003CCodeInstruction\u003E instructions)\r\n\t\t{\r\n\t\t\treturn RobustTranspiler.SafeTranspile(instructions, \u0022IngredientBinding\u0022, delegate(List\u003CCodeInstruction\u003E codes)\r\n\t\t\t{\r\n\t\t\t\t//IL_005a: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t\t//IL_0064: Expected O, but got Unknown\r\n\t\t\t\t//IL_006e: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t\t//IL_0078: Expected O, but got Unknown\r\n\t\t\t\tint num = RobustTranspiler.FindMethodCall(codes, typeof(XUiM_PlayerInventory), \u0022GetItemCount\u0022, new Type[1] { typeof(ItemValue) });\r\n\t\t\t\tif (num == -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tLogDebug(\u0022[IngredientBinding] GetItemCount not found\u0022);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tMethodInfo methodInfo = AccessTools.Method(typeof(ProxiCraft), \u0022AddIngredientContainerCount\u0022, (Type[])null, (Type[])null);\r\n\t\t\t\tcodes.Insert(num \u002B 1, new CodeInstruction(OpCodes.Ldarg_0, (object)null));\r\n\t\t\t\tcodes.Insert(num \u002B 2, new CodeInstruction(OpCodes.Call, (object)methodInfo));\r\n\t\t\t\tLogDebug(string.Format(\u0022[{0}] Injected after GetItemCount at IL index {1}\u0022, \u0022IngredientBinding\u0022, num));\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t}"},{"className":"XUiC_ItemStack","methodName":"HandleSlotChangeEvent","patchType":"Postfix","codeSnippet":"public static void Postfix(XUiC_ItemStack __instance)\r\n\t\t{\r\n\t\t\t//IL_0043: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0049: Invalid comparison between Unknown and I4\r\n\t\t\t//IL_004d: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0053: Invalid comparison between Unknown and I4\r\n\t\t\t//IL_00c3: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif ((config2 != null \u0026\u0026 !config2.enableForQuests) || (ContainerManager.CurrentOpenContainer == null \u0026\u0026 (Object)(object)ContainerManager.CurrentOpenVehicle == (Object)null) || (int)__instance.StackLocation == 2 || (int)__instance.StackLocation == 5)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tGameManager instance = GameManager.Instance;\r\n\t\t\t\tobject obj;\r\n\t\t\t\tif (instance == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tWorld world = instance.World;\r\n\t\t\t\t\tobj = ((world != null) ? ((WorldBase)world).GetPrimaryPlayer() : null);\r\n\t\t\t\t}\r\n\t\t\t\tEntityPlayerLocal val = (EntityPlayerLocal)obj;\r\n\t\t\t\tif (!((Object)(object)val == (Object)null))\r\n\t\t\t\t{\r\n\t\t\t\t\tFieldInfo field = typeof(EntityPlayerLocal).GetField(\u0022DragAndDropItemChanged\u0022, BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);\r\n\t\t\t\t\tif (field != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t(field.GetValue(val) as Delegate)?.DynamicInvoke();\r\n\t\t\t\t\t\tFileLog($\u0022[RECOUNT] Fired DragAndDropItemChanged from {__instance.StackLocation} slot change\u0022);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tFileLog(\u0022ItemStack_SlotChanged_Patch: Exception: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_LootContainer","methodName":"HandleLootSlotChangedEvent","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t\t{\r\n\t\t\tContainerManager.InvalidateCache();\r\n\t\t\tRefreshRecipeTracker();\r\n\t\t\tMarkHudAmmoDirty();\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif (config2 != null \u0026\u0026 !config2.enableForQuests)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tGameManager instance = GameManager.Instance;\r\n\t\t\t\tobject obj;\r\n\t\t\t\tif (instance == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tWorld world = instance.World;\r\n\t\t\t\t\tobj = ((world != null) ? ((WorldBase)world).GetPrimaryPlayer() : null);\r\n\t\t\t\t}\r\n\t\t\t\tEntityPlayerLocal val = (EntityPlayerLocal)obj;\r\n\t\t\t\tif (!((Object)(object)val == (Object)null))\r\n\t\t\t\t{\r\n\t\t\t\t\tFieldInfo field = typeof(EntityPlayerLocal).GetField(\u0022DragAndDropItemChanged\u0022, BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);\r\n\t\t\t\t\tif (field != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t(field.GetValue(val) as Delegate)?.DynamicInvoke();\r\n\t\t\t\t\t\tFileLog(\u0022[RECOUNT] Fired DragAndDropItemChanged from container slot change\u0022);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tFileLog(\u0022LootContainer_SlotChanged_Patch: Exception: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_LootContainer","methodName":"OnClose","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t\t{\r\n\t\t\t//IL_0006: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\tContainerManager.CurrentOpenContainer = null;\r\n\t\t\tContainerManager.CurrentOpenContainerPos = Vector3i.zero;\r\n\t\t\tContainerManager.CurrentOpenDrone = null;\r\n\t\t\tContainerManager.InvalidateCache();\r\n\t\t\tFileLog(\u0022[CACHE] OnClose: Cleared\u0022);\r\n\t\t}"},{"className":"XUiC_LootContainer","methodName":"OnOpen","patchType":"Postfix","codeSnippet":"public static void Postfix(XUiC_LootContainer __instance)\r\n\t\t{\r\n\t\t\t//IL_0085: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_008a: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0096: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_009b: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00ad: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00bd: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00a7: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00ac: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tobject obj = typeof(XUiC_LootContainer).GetField(\u0022localTileEntity\u0022, BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic)?.GetValue(__instance);\r\n\t\t\t\tITileEntityLootable val = (ITileEntityLootable)((obj is ITileEntityLootable) ? obj : null);\r\n\t\t\t\tif (val == null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tContainerManager.CurrentOpenContainer = val;\r\n\t\t\t\tint entityId = ((ITileEntity)val).EntityId;\r\n\t\t\t\tif (entityId != -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tGameManager instance = GameManager.Instance;\r\n\t\t\t\t\tobject obj2;\r\n\t\t\t\t\tif (instance == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tobj2 = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tWorld world = instance.World;\r\n\t\t\t\t\t\tobj2 = ((world != null) ? ((WorldBase)world).GetEntity(entityId) : null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tEntityDrone val2 = (EntityDrone)((obj2 is EntityDrone) ? obj2 : null);\r\n\t\t\t\t\tif (val2 != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tContainerManager.CurrentOpenDrone = val2;\r\n\t\t\t\t\t\tFileLog($\u0022[CACHE] OnOpen: Set open drone entityId={entityId}\u0022);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tVector3i currentOpenContainerPos = Vector3i.zero;\r\n\t\t\t\tTileEntity val3 = (TileEntity)(object)((val is TileEntity) ? val : null);\r\n\t\t\t\tif (val3 != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrentOpenContainerPos = val3.ToWorldPos();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tITileEntity val4 = (ITileEntity)(object)val;\r\n\t\t\t\t\tif (val4 != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcurrentOpenContainerPos = val4.ToWorldPos();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tContainerManager.CurrentOpenContainerPos = currentOpenContainerPos;\r\n\t\t\t\tContainerManager.InvalidateCache();\r\n\t\t\t\tFileLog($\u0022[CACHE] OnOpen: Set open container at {ContainerManager.CurrentOpenContainerPos}\u0022);\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tFileLog(\u0022LootContainer_OnOpen_Patch: Exception: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_PowerSourceStats","methodName":"BtnRefuel_OnPress","patchType":"Transpiler","codeSnippet":"public static IEnumerable\u003CCodeInstruction\u003E Transpiler(IEnumerable\u003CCodeInstruction\u003E instructions)\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.enableForGeneratorRefuel)\r\n\t\t\t{\r\n\t\t\t\treturn instructions;\r\n\t\t\t}\r\n\t\t\treturn RobustTranspiler.SafeTranspile(instructions, \u0022GeneratorRefuel\u0022, delegate(List\u003CCodeInstruction\u003E codes)\r\n\t\t\t{\r\n\t\t\t\tMethodInfo replacementMethod = AccessTools.Method(typeof(ProxiCraft), \u0022DecItemForGeneratorRefuel\u0022, (Type[])null, (Type[])null);\r\n\t\t\t\treturn RobustTranspiler.TryReplaceMethodCall(codes, typeof(Bag), \u0022DecItem\u0022, replacementMethod, \u0022GeneratorRefuel\u0022, null, 1, new string[4] { \u0022Dec\u0022, \u0022Remove\u0022, \u0022Subtract\u0022, \u0022Consume\u0022 });\r\n\t\t\t});\r\n\t\t}"},{"className":"XUiC_RecipeCraftCount","methodName":"calcMaxCraftable","patchType":"Transpiler","codeSnippet":"public static IEnumerable\u003CCodeInstruction\u003E Transpiler(IEnumerable\u003CCodeInstruction\u003E instructions)\r\n\t\t{\r\n\t\t\tif (AdaptivePatching.HasTranspilerConflict(AccessTools.Method(typeof(XUiC_RecipeCraftCount), \u0022calcMaxCraftable\u0022, (Type[])null, (Type[])null)))\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022XUiC_RecipeCraftCount.calcMaxCraftable has conflict - skipping Transpiler\u0022);\r\n\t\t\t\tRobustTranspiler.RecordTranspilerStatus(\u0022CraftMaxCraftable\u0022, success: false);\r\n\t\t\t\treturn instructions;\r\n\t\t\t}\r\n\t\t\treturn RobustTranspiler.SafeTranspile(instructions, \u0022CraftMaxCraftable\u0022, delegate(List\u003CCodeInstruction\u003E codes)\r\n\t\t\t{\r\n\t\t\t\t//IL_008d: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t\t//IL_0097: Expected O, but got Unknown\r\n\t\t\t\tMethodInfo methodInfo = AccessTools.Method(typeof(ProxiCraft), \u0022AddContainerItemsArray\u0022, (Type[])null, (Type[])null);\r\n\t\t\t\tint num = RobustTranspiler.FindMethodCall(codes, typeof(XUiM_PlayerInventory), \u0022GetAllItemStacks\u0022);\r\n\t\t\t\tif (num == -1)\r\n\t\t\t\t{\r\n\t\t\t\t\tLogDebug(\u0022[CraftMaxCraftable] GetAllItemStacks not found\u0022);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tfor (int i = num \u002B 1; i \u003C Math.Min(num \u002B 6, codes.Count); i\u002B\u002B)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (codes[i].opcode == OpCodes.Callvirt \u0026\u0026 codes[i].operand is MethodInfo { Name: \u0022ToArray\u0022 })\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcodes.Insert(i \u002B 1, new CodeInstruction(OpCodes.Call, (object)methodInfo));\r\n\t\t\t\t\t\tLogDebug(string.Format(\u0022[{0}] Injected after ToArray at IL index {1}\u0022, \u0022CraftMaxCraftable\u0022, i));\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tLogDebug(\u0022[CraftMaxCraftable] ToArray not found after GetAllItemStacks\u0022);\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}"},{"className":"XUiC_RecipeList","methodName":"","patchType":"Prefix","codeSnippet":null},{"className":"XUiC_VehicleContainer","methodName":"HandleLootSlotChangedEvent","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t\t{\r\n\t\t\tContainerManager.InvalidateCache();\r\n\t\t\tRefreshRecipeTracker();\r\n\t\t\tMarkHudAmmoDirty();\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif (config2 != null \u0026\u0026 !config2.enableForQuests)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tGameManager instance = GameManager.Instance;\r\n\t\t\t\tobject obj;\r\n\t\t\t\tif (instance == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tWorld world = instance.World;\r\n\t\t\t\t\tobj = ((world != null) ? ((WorldBase)world).GetPrimaryPlayer() : null);\r\n\t\t\t\t}\r\n\t\t\t\tEntityPlayerLocal val = (EntityPlayerLocal)obj;\r\n\t\t\t\tif (!((Object)(object)val == (Object)null))\r\n\t\t\t\t{\r\n\t\t\t\t\tFieldInfo field = typeof(EntityPlayerLocal).GetField(\u0022DragAndDropItemChanged\u0022, BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);\r\n\t\t\t\t\tif (field != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t(field.GetValue(val) as Delegate)?.DynamicInvoke();\r\n\t\t\t\t\t\tFileLog(\u0022[RECOUNT] Fired DragAndDropItemChanged from vehicle slot change\u0022);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tFileLog(\u0022VehicleContainer_SlotChanged_Patch: Exception: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_VehicleStorageWindowGroup","methodName":"OnClose","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t\t{\r\n\t\t\tContainerManager.CurrentOpenVehicle = null;\r\n\t\t\tContainerManager.InvalidateCache();\r\n\t\t\tFileLog(\u0022[CACHE] VehicleStorageWindowGroup.OnClose: Cleared\u0022);\r\n\t\t}"},{"className":"XUiC_VehicleStorageWindowGroup","methodName":"OnOpen","patchType":"Postfix","codeSnippet":"public static void Postfix(XUiC_VehicleStorageWindowGroup __instance)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tobject obj = typeof(XUiC_VehicleStorageWindowGroup).GetField(\u0022currentVehicleEntity\u0022, BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic)?.GetValue(__instance);\r\n\t\t\t\tEntityVehicle val = (EntityVehicle)((obj is EntityVehicle) ? obj : null);\r\n\t\t\t\tif ((Object)(object)val != (Object)null)\r\n\t\t\t\t{\r\n\t\t\t\t\tContainerManager.CurrentOpenVehicle = val;\r\n\t\t\t\t\tContainerManager.InvalidateCache();\r\n\t\t\t\t\tFileLog(\u0022[CACHE] VehicleStorageWindowGroup.OnOpen: Set open vehicle \u0022 \u002B ((EntityAlive)val).EntityName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tFileLog(\u0022VehicleStorageWindowGroup_OnOpen_Patch: Exception: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_WorkstationOutputGrid","methodName":"UpdateBackend","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t\t{\r\n\t\t\tContainerManager.InvalidateCache();\r\n\t\t\tRefreshRecipeTracker();\r\n\t\t\tMarkHudAmmoDirty();\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif (config2 != null \u0026\u0026 !config2.enableForQuests)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tGameManager instance = GameManager.Instance;\r\n\t\t\t\tobject obj;\r\n\t\t\t\tif (instance == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tWorld world = instance.World;\r\n\t\t\t\t\tobj = ((world != null) ? ((WorldBase)world).GetPrimaryPlayer() : null);\r\n\t\t\t\t}\r\n\t\t\t\tEntityPlayerLocal val = (EntityPlayerLocal)obj;\r\n\t\t\t\tif (!((Object)(object)val == (Object)null))\r\n\t\t\t\t{\r\n\t\t\t\t\tFieldInfo field = typeof(EntityPlayerLocal).GetField(\u0022DragAndDropItemChanged\u0022, BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic);\r\n\t\t\t\t\tif (field != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t(field.GetValue(val) as Delegate)?.DynamicInvoke();\r\n\t\t\t\t\t\tFileLog(\u0022[RECOUNT] Fired DragAndDropItemChanged from workstation output change\u0022);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tFileLog(\u0022WorkstationOutputGrid_UpdateBackend_Patch: Exception: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_WorkstationWindowGroup","methodName":"OnClose","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t\t{\r\n\t\t\tContainerManager.CurrentOpenWorkstation = null;\r\n\t\t\tContainerManager.InvalidateCache();\r\n\t\t\tFileLog(\u0022[CACHE] WorkstationWindowGroup.OnClose: Cleared\u0022);\r\n\t\t}"},{"className":"XUiC_WorkstationWindowGroup","methodName":"OnOpen","patchType":"Postfix","codeSnippet":"public static void Postfix(XUiC_WorkstationWindowGroup __instance)\r\n\t\t{\r\n\t\t\t//IL_005e: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tobject obj = typeof(XUiC_WorkstationWindowGroup).GetField(\u0022WorkstationData\u0022, BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic)?.GetValue(__instance);\r\n\t\t\t\tif (obj != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobject obj2 = obj.GetType().GetProperty(\u0022TileEntity\u0022)?.GetValue(obj);\r\n\t\t\t\t\tTileEntityWorkstation val = (TileEntityWorkstation)((obj2 is TileEntityWorkstation) ? obj2 : null);\r\n\t\t\t\t\tif (val != null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tContainerManager.CurrentOpenWorkstation = val;\r\n\t\t\t\t\t\tContainerManager.InvalidateCache();\r\n\t\t\t\t\t\tFileLog($\u0022[CACHE] WorkstationWindowGroup.OnOpen: Set open workstation at {((TileEntity)val).ToWorldPos()}\u0022);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tFileLog(\u0022WorkstationWindowGroup_OnOpen_Patch: Exception: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiM_PlayerInventory","methodName":"CanSwapItems","patchType":"Postfix","codeSnippet":"public static void Postfix(XUiM_PlayerInventory __instance, ref bool __result, ItemStack _removedStack, ItemStack _addedStack, int _slotNumber)\r\n\t\t{\r\n\t\t\tif (__result)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif ((config2 != null \u0026\u0026 !config2.enableForTrader) || !IsGameReady())\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (_removedStack == null || _removedStack.IsEmpty() || _addedStack == null || _addedStack.IsEmpty())\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tItemValue item = ItemClass.GetItem(TraderInfo.CurrencyItem, false);\r\n\t\t\t\tbool flag = _removedStack.itemValue.type == item.type;\r\n\t\t\t\tbool flag2 = _addedStack.itemValue.type == item.type;\r\n\t\t\t\tobject[] array = new object[6];\r\n\t\t\t\tItemClass itemClass = _removedStack.itemValue.ItemClass;\r\n\t\t\t\tarray[0] = ((itemClass != null) ? itemClass.GetItemName() : null);\r\n\t\t\t\tarray[1] = _removedStack.count;\r\n\t\t\t\tItemClass itemClass2 = _addedStack.itemValue.ItemClass;\r\n\t\t\t\tarray[2] = ((itemClass2 != null) ? itemClass2.GetItemName() : null);\r\n\t\t\t\tarray[3] = _addedStack.count;\r\n\t\t\t\tarray[4] = flag;\r\n\t\t\t\tarray[5] = flag2;\r\n\t\t\t\tFileLog(string.Format(\u0022[CANSWAP] removedStack={0}x{1}, addedStack={2}x{3}, isBuying={4}, isSelling={5}\u0022, array));\r\n\t\t\t\tint itemCount = ContainerManager.GetItemCount(Config, _removedStack.itemValue);\r\n\t\t\t\tif (itemCount \u003C= 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tItemClass itemClass3 = _removedStack.itemValue.ItemClass;\r\n\t\t\t\t\tFileLog(\u0022[CANSWAP] No containers have \u0022 \u002B ((itemClass3 != null) ? itemClass3.GetItemName() : null));\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tint itemCount2 = __instance.GetItemCount(_removedStack.itemValue);\r\n\t\t\t\tint num = itemCount2 \u002B itemCount;\r\n\t\t\t\tFileLog($\u0022[CANSWAP] playerCount={itemCount2}, containerCount={itemCount}, totalAvailable={num}, needed={_removedStack.count}\u0022);\r\n\t\t\t\tif (num \u003C _removedStack.count)\r\n\t\t\t\t{\r\n\t\t\t\t\tFileLog(\u0022[CANSWAP] Not enough items even with containers\u0022);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tint num2 = __instance.CountAvailableSpaceForItem(_addedStack.itemValue, true);\r\n\t\t\t\tFileLog($\u0022[CANSWAP] availableSpace={num2}, needed={_addedStack.count}\u0022);\r\n\t\t\t\tif (num2 \u003E= _addedStack.count)\r\n\t\t\t\t{\r\n\t\t\t\t\t__result = true;\r\n\t\t\t\t\tstring arg = (flag ? \u0022BUY\u0022 : (flag2 ? \u0022SELL\u0022 : \u0022SWAP\u0022));\r\n\t\t\t\t\tLogDebug($\u0022CanSwapItems ({arg}): Allowing with containers, have={num}, need={_removedStack.count}\u0022);\r\n\t\t\t\t\tFileLog(\u0022[CANSWAP] SUCCESS! Setting result=true\u0022);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tFileLog(\u0022[CANSWAP] Not enough space for received items\u0022);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error in CanSwapItems patch: \u0022 \u002B ex.Message);\r\n\t\t\t\tFileLog(\u0022[CANSWAP] ERROR: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiM_PlayerInventory","methodName":"HasItems","patchType":"Postfix","codeSnippet":"public static void Postfix(XUiM_PlayerInventory __instance, ref bool __result, IList\u003CItemStack\u003E _itemStacks, int _multiplier)\r\n\t\t{\r\n\t\t\tif (__result)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config == null || !config.modEnabled || !IsGameReady())\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tGameManager instance = GameManager.Instance;\r\n\t\t\t\tobject obj;\r\n\t\t\t\tif (instance == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tWorld world = instance.World;\r\n\t\t\t\t\tobj = ((world != null) ? ((WorldBase)world).GetPrimaryPlayer() : null);\r\n\t\t\t\t}\r\n\t\t\t\tEntityPlayerLocal val = (EntityPlayerLocal)obj;\r\n\t\t\t\tif (Config.enhancedSafetyCrafting \u0026\u0026 (Object)(object)val != (Object)null)\r\n\t\t\t\t{\r\n\t\t\t\t\t__result = VirtualInventoryProvider.HasAllItems(val, _itemStacks, _multiplier);\r\n\t\t\t\t\tif (__result)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tLogDebug(\u0022HasItems satisfied via VirtualInventoryProvider\u0022);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tList\u003CItemStack\u003E allItemStacks = __instance.GetAllItemStacks();\r\n\t\t\t\tforeach (ItemStack _itemStack in _itemStacks)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (_itemStack == null || _itemStack.IsEmpty())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tint num = _itemStack.count * _multiplier;\r\n\t\t\t\t\tint num2 = 0;\r\n\t\t\t\t\tforeach (ItemStack item in allItemStacks)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (item?.itemValue != null \u0026\u0026 item.itemValue.type == _itemStack.itemValue.type)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum2 \u002B= item.count;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tint itemCount = ContainerManager.GetItemCount(Config, _itemStack.itemValue);\r\n\t\t\t\t\tif (AdaptivePatching.SafeAddCount(num2, itemCount) \u003C num)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t__result = true;\r\n\t\t\t\tLogDebug(\u0022HasItems satisfied by inventory \u002B containers\u0022);\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error in HasItems patch: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiM_PlayerInventory","methodName":"RemoveItems","patchType":"Prefix","codeSnippet":"[HarmonyPrefix]\r\n\t\tpublic static void Prefix(XUiM_PlayerInventory __instance, IList\u003CItemStack\u003E _itemStacks, int _multiplier)\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_useEnhancedSafety = Config.enhancedSafetyCrafting;\r\n\t\t\t_pendingContainerRemovals = _itemStacks;\r\n\t\t\t_pendingMultiplier = _multiplier;\r\n\t\t\t_inventoryCountsBefore.Clear();\r\n\t\t\tforeach (ItemStack _itemStack in _itemStacks)\r\n\t\t\t{\r\n\t\t\t\tif (_itemStack != null \u0026\u0026 !_itemStack.IsEmpty())\r\n\t\t\t\t{\r\n\t\t\t\t\tint type = _itemStack.itemValue.type;\r\n\t\t\t\t\tif (!_inventoryCountsBefore.ContainsKey(type))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tBag backpack = __instance.Backpack;\r\n\t\t\t\t\t\tint num = ((backpack != null) ? backpack.GetItemCount(_itemStack.itemValue, -1, -1, true) : 0);\r\n\t\t\t\t\t\tInventory toolbelt = __instance.Toolbelt;\r\n\t\t\t\t\t\tint num2 = ((toolbelt != null) ? toolbelt.GetItemCount(_itemStack.itemValue, false, -1, -1, true) : 0);\r\n\t\t\t\t\t\tint num3 = num \u002B num2;\r\n\t\t\t\t\t\t_inventoryCountsBefore[type] = num3;\r\n\t\t\t\t\t\tobject[] array = new object[6];\r\n\t\t\t\t\t\tItemClass itemClass = _itemStack.itemValue.ItemClass;\r\n\t\t\t\t\t\tarray[0] = ((itemClass != null) ? itemClass.GetItemName() : null);\r\n\t\t\t\t\t\tarray[1] = num3;\r\n\t\t\t\t\t\tarray[2] = num;\r\n\t\t\t\t\t\tarray[3] = num2;\r\n\t\t\t\t\t\tarray[4] = _itemStack.count * _multiplier;\r\n\t\t\t\t\t\tarray[5] = _useEnhancedSafety;\r\n\t\t\t\t\t\tFileLog(string.Format(\u0022[REMOVEITEMS] Prefix: {0} rawInv={1} (bag={2}, toolbelt={3}), need={4}, enhancedSafety={5}\u0022, array));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiM_PlayerInventory","methodName":"RemoveItems","patchType":"Postfix","codeSnippet":"[HarmonyPostfix]\r\n\t\tpublic static void Postfix(XUiM_PlayerInventory __instance)\r\n\t\t{\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif ((config != null \u0026\u0026 !config.modEnabled) || _pendingContainerRemovals == null)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!IsGameReady())\r\n\t\t\t{\r\n\t\t\t\t_pendingContainerRemovals = null;\r\n\t\t\t\t_inventoryCountsBefore.Clear();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tGameManager instance = GameManager.Instance;\r\n\t\t\t\tobject obj;\r\n\t\t\t\tif (instance == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tWorld world = instance.World;\r\n\t\t\t\t\tobj = ((world != null) ? ((WorldBase)world).GetPrimaryPlayer() : null);\r\n\t\t\t\t}\r\n\t\t\t\tEntityPlayerLocal val = (EntityPlayerLocal)obj;\r\n\t\t\t\tforeach (ItemStack pendingContainerRemoval in _pendingContainerRemovals)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (pendingContainerRemoval == null || pendingContainerRemoval.IsEmpty())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tint num = pendingContainerRemoval.count * _pendingMultiplier;\r\n\t\t\t\t\tint type = pendingContainerRemoval.itemValue.type;\r\n\t\t\t\t\tint value;\r\n\t\t\t\t\tint num2 = (_inventoryCountsBefore.TryGetValue(type, out value) ? value : 0);\r\n\t\t\t\t\tint num3 = Math.Min(num, num2);\r\n\t\t\t\t\tint num4 = num - num3;\r\n\t\t\t\t\tobject[] array = new object[4];\r\n\t\t\t\t\tItemClass itemClass = pendingContainerRemoval.itemValue.ItemClass;\r\n\t\t\t\t\tarray[0] = ((itemClass != null) ? itemClass.GetItemName() : null);\r\n\t\t\t\t\tarray[1] = num;\r\n\t\t\t\t\tarray[2] = num2;\r\n\t\t\t\t\tarray[3] = num4;\r\n\t\t\t\t\tFileLog(string.Format(\u0022[REMOVEITEMS] Postfix: {0} neededTotal={1}, inventoryHad={2}, fromContainers={3}\u0022, array));\r\n\t\t\t\t\tif (num4 \u003E 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tint num5;\r\n\t\t\t\t\t\tif (_useEnhancedSafety \u0026\u0026 (Object)(object)val != (Object)null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum5 = ContainerManager.RemoveItems(Config, pendingContainerRemoval.itemValue, num4);\r\n\t\t\t\t\t\t\tFileLog($\u0022[REMOVEITEMS] Enhanced safety: Removed {num5} from containers via ContainerManager\u0022);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum5 = ContainerManager.RemoveItems(Config, pendingContainerRemoval.itemValue, num4);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tobject[] obj2 = new object[5] { num5, num4, null, null, null };\r\n\t\t\t\t\t\tItemValue itemValue = pendingContainerRemoval.itemValue;\r\n\t\t\t\t\t\tobject obj3;\r\n\t\t\t\t\t\tif (itemValue == null)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tobj3 = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tItemClass itemClass2 = itemValue.ItemClass;\r\n\t\t\t\t\t\t\tobj3 = ((itemClass2 != null) ? itemClass2.GetItemName() : null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tobj2[2] = obj3;\r\n\t\t\t\t\t\tobj2[3] = num2;\r\n\t\t\t\t\t\tobj2[4] = num;\r\n\t\t\t\t\t\tLogDebug(string.Format(\u0022Removed {0}/{1} {2} from containers (had {3} in inventory, needed {4})\u0022, obj2));\r\n\t\t\t\t\t\tFileLog($\u0022[REMOVEITEMS] Removed {num5} from containers\u0022);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogWarning(\u0022Error in RemoveItems Postfix: \u0022 \u002B ex.Message);\r\n\t\t\t\tFileLog(\u0022[REMOVEITEMS] ERROR: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t\tfinally\r\n\t\t\t{\r\n\t\t\t\t_pendingContainerRemovals = null;\r\n\t\t\t\t_inventoryCountsBefore.Clear();\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiM_Vehicle","methodName":"RepairVehicle","patchType":"Prefix","codeSnippet":"public static void Prefix(XUi _xui, Vehicle vehicle)\r\n\t\t{\r\n\t\t\t//IL_011f: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0125: Expected O, but got Unknown\r\n\t\t\t//IL_0166: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_016d: Expected O, but got Unknown\r\n\t\t\tModConfig config = Config;\r\n\t\t\tif (config != null \u0026\u0026 !config.modEnabled)\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tModConfig config2 = Config;\r\n\t\t\tif ((config2 != null \u0026\u0026 !config2.enableForItemRepair) || !IsGameReady())\r\n\t\t\t{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (Config.enhancedSafetyVehicle \u0026\u0026 !MultiplayerModTracker.IsModAllowed())\r\n\t\t\t{\r\n\t\t\t\tLogDebug(\u0022Vehicle repair (enhanced): MP locked, skipping storage pre-stage\u0022);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (vehicle == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobject obj;\r\n\t\t\t\t\tif (_xui == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tobj = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tEntityVehicle vehicle2 = _xui.vehicle;\r\n\t\t\t\t\t\tobj = ((vehicle2 != null) ? vehicle2.GetVehicle() : null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvehicle = (Vehicle)obj;\r\n\t\t\t\t}\r\n\t\t\t\tif (vehicle == null || vehicle.GetRepairAmountNeeded() \u003C= 0)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tobject obj2;\r\n\t\t\t\tif (_xui == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tobj2 = null;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tLocalPlayerUI playerUI = _xui.playerUI;\r\n\t\t\t\t\tobj2 = ((playerUI != null) ? playerUI.entityPlayer : null);\r\n\t\t\t\t}\r\n\t\t\t\tEntityPlayerLocal val = (EntityPlayerLocal)obj2;\r\n\t\t\t\tif ((Object)(object)val == (Object)null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tItemValue item = ItemClass.GetItem(\u0022resourceRepairKit\u0022, false);\r\n\t\t\t\tif (((item != null) ? item.ItemClass : null) == null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tBag bag = ((EntityAlive)val).bag;\r\n\t\t\t\tint num = ((bag != null) ? bag.GetItemCount(item, -1, -1, true) : 0);\r\n\t\t\t\tInventory inventory = ((EntityAlive)val).inventory;\r\n\t\t\t\tint num2 = ((inventory != null) ? inventory.GetItemCount(item, false, -1, -1, true) : 0);\r\n\t\t\t\tif (num \u002B num2 \u003E 0 || ContainerManager.GetItemCount(Config, item) \u003C= 0)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tItemStack val2 = new ItemStack(item.Clone(), 1);\r\n\t\t\t\tif (!((EntityAlive)val).bag.CanStack(val2) \u0026\u0026 !((EntityAlive)val).inventory.CanStack(val2))\r\n\t\t\t\t{\r\n\t\t\t\t\tLogDebug(\u0022Vehicle repair: Player inventory full, cannot pre-stage repair kit\u0022);\r\n\t\t\t\t}\r\n\t\t\t\telse if (ContainerManager.RemoveItems(Config, item, 1) \u003E 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tItemStack val3 = new ItemStack(item.Clone(), 1);\r\n\t\t\t\t\tif (((EntityAlive)val).bag.AddItem(val3))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tLogDebug(\u0022Vehicle repair: Pre-staged 1 repair kit from storage to bag\u0022);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t((EntityAlive)val).inventory.AddItem(val3);\r\n\t\t\t\t\tLogDebug(\u0022Vehicle repair: Pre-staged 1 repair kit from storage to toolbelt\u0022);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception ex)\r\n\t\t\t{\r\n\t\t\t\tLogDebug(\u0022Vehicle repair patch error: \u0022 \u002B ex.Message);\r\n\t\t\t}\r\n\t\t}"}],"extensions":[{"baseClass":"imodapi","childClass":"IModApi"}],"entityDeps":[{"entityType":"item","entityName":"resourceRepairKit","sourceFile":"ProxiCraft.cs","pattern":"ItemClass.GetItem(\u0022resourceRepairKit\u0022,"}],"entityTypes":null,"topEntities":null},{"name":"QuickStack","loadOrder":13,"folderName":"QuickStack","modType":"C#","health":"Healthy","healthNote":"C#: 6 game code patches","xmlOps":0,"csharpDeps":6,"removes":0,"oneLiner":"Patches XUiC_BackpackWindow.Init","features":["Patches XUiC_BackpackWindow.Init","Patches XUiC_BackpackWindow.OnOpen","Patches XUiC_BackpackWindow.GetBindingValueInternal","Patches GameManager.UpdateTick","Patches XUiC_ItemStack.updateBorderColor"],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[],"patches":[{"className":"GameManager","methodName":"UpdateTick","patchType":"Postfix","codeSnippet":"public static void Postfix(EntityPlayerLocal __instance)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (UICamera.GetKeyDown.Invoke(QuickStack.quickStackHotkeys[QuickStack.quickStackHotkeys.Length - 1]))\r\n\t\t\t\t{\r\n\t\t\t\t\tfor (int i = 0; i \u003C QuickStack.quickStackHotkeys.Length - 1; i\u002B\u002B)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (!UICamera.GetKey.Invoke(QuickStack.quickStackHotkeys[i]))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tQuickStack.QuickStackOnClick();\r\n\t\t\t\t\tManager.PlayButtonClick();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tif (!UICamera.GetKeyDown.Invoke(QuickStack.quickRestockHotkeys[QuickStack.quickRestockHotkeys.Length - 1]))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (int j = 0; j \u003C QuickStack.quickRestockHotkeys.Length - 1; j\u002B\u002B)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (!UICamera.GetKey.Invoke(QuickStack.quickRestockHotkeys[j]))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tQuickStack.QuickRestockOnClick();\r\n\t\t\t\t\tManager.PlayButtonClick();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t\tQuickStack.printExceptionInfo(e);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_BackpackWindow","methodName":"GetBindingValueInternal","patchType":"Postfix","codeSnippet":"public static void Postfix(ref bool __result, XUiC_BackpackWindow __instance, ref string value, string bindingName)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (!__result \u0026\u0026 bindingName != null \u0026\u0026 bindingName == \u0022notlootingorvehiclestorage\u0022)\r\n\t\t\t\t{\r\n\t\t\t\t\tbool flag = (Object)(object)((XUiController)__instance).xui.vehicle != (Object)null \u0026\u0026 ((XUiController)__instance).xui.vehicle.GetVehicle().HasStorage();\r\n\t\t\t\t\tbool flag2 = ((XUiController)__instance).xui.lootContainer != null \u0026\u0026 ((ITileEntity)((XUiController)__instance).xui.lootContainer).EntityId == -1;\r\n\t\t\t\t\tbool flag3 = ((XUiController)__instance).xui.lootContainer != null \u0026\u0026 ((WorldBase)GameManager.Instance.World).GetEntity(((ITileEntity)((XUiController)__instance).xui.lootContainer).EntityId) is EntityDrone;\r\n\t\t\t\t\tvalue = (!flag \u0026\u0026 !flag2 \u0026\u0026 !flag3).ToString();\r\n\t\t\t\t\t__result = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t\tQuickStack.printExceptionInfo(e);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_BackpackWindow","methodName":"Init","patchType":"Postfix","codeSnippet":"public static void Postfix(XUiC_BackpackWindow __instance)\r\n\t\t{\r\n\t\t\t//IL_0053: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0058: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_005e: Expected O, but got Unknown\r\n\t\t\t//IL_0095: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_009a: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00a0: Expected O, but got Unknown\r\n\t\t\t//IL_00cd: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00d2: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_00d8: Expected O, but got Unknown\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tQuickStack.backpackWindow = __instance;\r\n\t\t\t\tQuickStack.playerControls = ((XUiController)__instance).GetChildByType\u003CXUiC_ContainerStandardControls\u003E();\r\n\t\t\t\tQuickStack.playerBackpack = __instance.backpackGrid;\r\n\t\t\t\tUtils.Fill\u003Cfloat\u003E(QuickStack.lastClickTimes, 0f);\r\n\t\t\t\tXUiController[] itemStackControllers = (XUiController[])(object)((XUiC_ItemStackGrid)QuickStack.playerBackpack).GetItemStackControllers();\r\n\t\t\t\tXUiController[] array = itemStackControllers;\r\n\t\t\t\tforeach (XUiController obj in array)\r\n\t\t\t\t{\r\n\t\t\t\t\tobject obj2 = _003C_003Ec._003C_003E9__0_2;\r\n\t\t\t\t\tif (obj2 == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tXUiEvent_OnPressEventHandler val = delegate(XUiController _sender, int _mouseButton)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tfor (int j = 0; j \u003C QuickStack.quickLockHotkeys.Length; j\u002B\u002B)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tif (!UICamera.GetKey.Invoke(QuickStack.quickLockHotkeys[j]))\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tXUiC_ItemStack val4 = (XUiC_ItemStack)(object)((_sender is XUiC_ItemStack) ? _sender : null);\r\n\t\t\t\t\t\t\tval4.UserLockedSlot = !val4.UserLockedSlot;\r\n\t\t\t\t\t\t\tQuickStack.backpackWindow.UpdateLockedSlots(QuickStack.playerControls);\r\n\t\t\t\t\t\t\t((XUiController)val4).xui.PlayMenuClickSound();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t_003C_003Ec._003C_003E9__0_2 = val;\r\n\t\t\t\t\t\tobj2 = (object)val;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tobj.OnPress \u002B= (XUiEvent_OnPressEventHandler)obj2;\r\n\t\t\t\t}\r\n\t\t\t\tXUiController childById = ((XUiController)QuickStack.playerControls).GetChildById(\u0022btnMoveQuickStack\u0022);\r\n\t\t\t\tif (childById != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tXUiController obj3 = childById;\r\n\t\t\t\t\tobject obj4 = _003C_003Ec._003C_003E9__0_0;\r\n\t\t\t\t\tif (obj4 == null)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tXUiEvent_OnPressEventHandler val2 = delegate\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tQuickStack.QuickStackOnClick();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t_003C_003Ec._003C_003E9__0_0 = val2;\r\n\t\t\t\t\t\tobj4 = (object)val2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tobj3.OnPress \u002B= (XUiEvent_OnPressEventHandler)obj4;\r\n\t\t\t\t}\r\n\t\t\t\tchildById = ((XUiController)QuickStack.playerControls).GetChildById(\u0022btnMoveQuickRestock\u0022);\r\n\t\t\t\tif (childById == null)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tXUiController obj5 = childById;\r\n\t\t\t\tobject obj6 = _003C_003Ec._003C_003E9__0_1;\r\n\t\t\t\tif (obj6 == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tXUiEvent_OnPressEventHandler val3 = delegate\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tQuickStack.QuickRestockOnClick();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t_003C_003Ec._003C_003E9__0_1 = val3;\r\n\t\t\t\t\tobj6 = (object)val3;\r\n\t\t\t\t}\r\n\t\t\t\tobj5.OnPress \u002B= (XUiEvent_OnPressEventHandler)obj6;\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t\tQuickStack.printExceptionInfo(e);\r\n\t\t\t}\r\n\t\t}"},{"className":"XUiC_BackpackWindow","methodName":"OnOpen","patchType":"Postfix","codeSnippet":"public static void Postfix(XUiC_BackpackWindow __instance)\r\n\t\t{\r\n\t\t\tQuickStack.UpdateUI();\r\n\t\t}"},{"className":"XUiC_ItemStack","methodName":"updateBorderColor","patchType":"Postfix","codeSnippet":"[HarmonyPostfix]\r\n\t\tpublic static void Postfix(XUiC_ItemStack __instance)\r\n\t\t{\r\n\t\t\t//IL_0016: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_001b: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (__instance.UserLockedSlot \u0026\u0026 QuickStack.lockBorderColor.a \u003E 0)\r\n\t\t\t\t{\r\n\t\t\t\t\t__instance.selectionBorderColor = QuickStack.lockBorderColor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (Exception e)\r\n\t\t\t{\r\n\t\t\t\tQuickStack.printExceptionInfo(e);\r\n\t\t\t}\r\n\t\t}"}],"extensions":[{"baseClass":"imodapi","childClass":"IModApi"}],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"SpawnSleepersInRange","loadOrder":14,"folderName":"SpawnSleepersInRange","modType":"C#","health":"Healthy","healthNote":"C#: 15 game code patches","xmlOps":0,"csharpDeps":15,"removes":0,"oneLiner":"Patches GameManager","features":["Patches GameManager","Patches GameManager","Patches NavObject","Patches SleeperVolume","Patches SleeperVolume","Patches SleeperVolume","Patches SleeperVolume","Patches GameManager","Patches GameManager","Patches NavObject"],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[],"patches":[{"className":"GameManager","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t{\r\n\t\tSpawnManager.Instance.Stop();\r\n\t}"},{"className":"GameManager","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t{\r\n\t\tSpawnManager.Instance.Start();\r\n\t}"},{"className":"GameManager","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t{\r\n\t\tSpawnManager.Instance.Stop();\r\n\t}"},{"className":"GameManager","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix()\r\n\t{\r\n\t\tSpawnManager.Instance.Start();\r\n\t}"},{"className":"NavObject","methodName":"","patchType":"Prefix","codeSnippet":"public static bool Prefix(ref bool __result, EntityPlayerLocal player, Entity entity, NavObjectClass navObjectClass)\r\n\t{\r\n\t\t__result = IsValidEntity(player, entity, navObjectClass);\r\n\t\treturn false;\r\n\t}"},{"className":"NavObject","methodName":"","patchType":"Prefix","codeSnippet":"public static bool Prefix(ref bool __result, EntityPlayerLocal player, Entity entity, NavObjectClass navObjectClass)\r\n\t{\r\n\t\t__result = IsValidEntity(player, entity, navObjectClass);\r\n\t\treturn false;\r\n\t}"},{"className":"SleeperVolume","methodName":"","patchType":"Prefix","codeSnippet":"public static bool Prefix(SleeperVolume __instance)\r\n\t{\r\n\t\tif (!IsInLandClaim(__instance))\r\n\t\t{\r\n\t\t\tReset(__instance);\r\n\t\t}\r\n\t\treturn false;\r\n\t}"},{"className":"SleeperVolume","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix(SleeperVolume __instance, ref EntityAlive __result, int ___flags)\r\n\t{\r\n\t\tif ((Object)(object)__result == (Object)null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry\r\n\t\t{\r\n\t\t\t__result.SetSleeperActive();\r\n\t\t\t__result.ResumeSleeperPose();\r\n\t\t\t__instance.respawnTime = Math.Max(__instance.respawnTime, GameManager.Instance.World.worldTime \u002B 1000);\r\n\t\t\t__result.IsSleeperPassive = !Config.Instance.SpawnAggressive;\r\n\t\t}\r\n\t\tcatch (Exception ex)\r\n\t\t{\r\n\t\t\tLog.Out(\u0022SpawnSleepersInRange::SleeperVolumeSpawn failed: \u0022 \u002B ex.Message);\r\n\t\t}\r\n\t}"},{"className":"SleeperVolume","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix(ref EntityAlive __result, int ___flags)\r\n\t{\r\n\t\t__result.SetSleeperActive();\r\n\t\t__result.ResumeSleeperPose();\r\n\t}"},{"className":"SleeperVolume","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix(SleeperVolume __instance, World _world)\r\n\t{\r\n\t\tif (__instance.wasCleared)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (touchGroup == null)\r\n\t\t{\r\n\t\t\ttouchGroup = typeof(SleeperVolume).GetMethod(\u0022TouchGroup\u0022, BindingFlags.Instance | BindingFlags.NonPublic);\r\n\t\t}\r\n\t\tforeach (EntityPlayer item in _world.Players.list)\r\n\t\t{\r\n\t\t\tif (PlayerWithinRange(__instance, item, 30f))\r\n\t\t\t{\r\n\t\t\t\ttouchGroup.Invoke(__instance, new object[3] { _world, item, false });\r\n\t\t\t}\r\n\t\t}\r\n\t}"},{"className":"SleeperVolume","methodName":"","patchType":"Prefix","codeSnippet":"public static bool Prefix(SleeperVolume __instance)\r\n\t{\r\n\t\tif (!IsInLandClaim(__instance))\r\n\t\t{\r\n\t\t\tReset(__instance);\r\n\t\t}\r\n\t\treturn false;\r\n\t}"},{"className":"SleeperVolume","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix(SleeperVolume __instance, ref EntityAlive __result, int ___flags)\r\n\t{\r\n\t\tif ((Object)(object)__result == (Object)null)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry\r\n\t\t{\r\n\t\t\t__result.SetSleeperActive();\r\n\t\t\t__result.ResumeSleeperPose();\r\n\t\t\t__instance.respawnTime = Math.Max(__instance.respawnTime, GameManager.Instance.World.worldTime \u002B 1000);\r\n\t\t\t__result.IsSleeperPassive = !Config.Instance.SpawnAggressive;\r\n\t\t}\r\n\t\tcatch (Exception ex)\r\n\t\t{\r\n\t\t\tLog.Out(\u0022SpawnSleepersInRange::SleeperVolumeSpawn failed: \u0022 \u002B ex.Message);\r\n\t\t}\r\n\t}"}],"extensions":[{"baseClass":"imodapi","childClass":"IModApi"},{"baseClass":"imodapi","childClass":"IModApi"},{"baseClass":"imodapi","childClass":"IModApi"}],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"ToiletBatons","loadOrder":15,"folderName":"ToiletBatons","modType":"XML","health":"Healthy","healthNote":"Has Config/ but no operations parsed","xmlOps":0,"csharpDeps":0,"removes":0,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":null},"operations":[],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"TokimekisuMod_HighTierBlocks_shapes","loadOrder":16,"folderName":"TokimekisuMod_HighTierBlocks_shapes","modType":"XML","health":"Healthy","healthNote":"XML: 5 appends on 2 entities","xmlOps":5,"csharpDeps":0,"removes":0,"oneLiner":"Modifies Blocks, Items","features":[],"systems":["Blocks","Items"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003Cblock name=\u0022stainlessSteelShapes\u0022 shapes=\u0022All\u0022\u003E\r\n    \u003Cproperty name=\u0022Group\u0022 value=\u0022Building,advBuilding\u0022 /\u003E\r\n    \u003Cproperty name=\u0022DescriptionKey\u0022 value=\u0022stainlessSteelBlockGroupDesc\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022MstainlessSteel_shapes\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022New\u0022 /\u003E\r\n    \u003Cproperty name=\u0022DisplayType\u0022 value=\u0022blockHardened\u0022 /\u003E\r\n    \u003Cproperty name=\u0022PassThroughDamage\u0022 value=\u0022true\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Texture\u0022 value=\u0022355\u0022 /\u003E\r\n    \u003Cproperty nam..."},{"operation":"append","targetType":"block","targetName":"steelShapes","property":null,"xpath":"/blocks/block[@name=\u0027steelShapes\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027steelShapes\u0027]\u0022\u003E\r\n  \u003Cproperty class=\u0022UpgradeBlock\u0022\u003E\r\n    \u003Cproperty name=\u0022ToBlock\u0022 value=\u0022stainlessSteelShapes\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Item\u0022 value=\u0022resourceForgedSteel\u0022 /\u003E\r\n    \u003Cproperty name=\u0022ItemCount\u0022 value=\u002210\u0022 /\u003E\r\n    \u003Cproperty name=\u0022UpgradeHitCount\u0022 value=\u00224\u0022 /\u003E\r\n  \u003C/property\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"item","targetName":"meleeToolRepairT3Nailgun","property":"Allowed_upgrade_items","xpath":"/items/item[@name=\u0027meleeToolRepairT3Nailgun\u0027]/property[@class=\u0027Action1\u0027]/property[@name=\u0027Allowed_upgrade_items\u0027]/@value","elementContent":"\u003Cappend xpath=\u0022/items/item[@name=\u0027meleeToolRepairT3Nailgun\u0027]/property[@class=\u0027Action1\u0027]/property[@name=\u0027Allowed_upgrade_items\u0027]/@value\u0022\u003E ,resourceRawDiamond \u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/materials","elementContent":"\u003Cappend xpath=\u0022/materials\u0022\u003E\r\n  \u003Cmaterial id=\u0022MstainlessSteel_shapes\u0022\u003E\r\n    \u003Cproperty name=\u0022damage_category\u0022 value=\u0022metal\u0022 /\u003E\r\n    \u003Cproperty name=\u0022surface_category\u0022 value=\u0022metal\u0022 /\u003E\r\n    \u003Cproperty name=\u0022forge_category\u0022 value=\u0022iron\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Hardness\u0022 type=\u0022float\u0022 value=\u00221\u0022 /\u003E\r\n    \u003Cproperty name=\u0022stepsound\u0022 value=\u0022metal\u0022 /\u003E\r\n    \u003Cproperty name=\u0022stability_glue\u0022 value=\u0022320\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Mass\u0022 type=\u0022int\u0022 value=\u002220\u0022 /\u003E\r\n    \u003Cproperty name=\u0022explosionresistance\u0022 value=\u00222.05\u0022 /..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/recipes","elementContent":"\u003Cappend xpath=\u0022/recipes\u0022\u003E\r\n  \u003Crecipe name=\u0022stainlessSteelShapes:VariantHelper\u0022 count=\u00221\u0022 craft_time=\u002210\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceForgedSteel\u0022 count=\u002220\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n  \u003Crecipe name=\u0022reinforceStainlessShapes:VariantHelper\u0022 count=\u00221\u0022 craft_time=\u002210\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceForgedSteel\u0022 count=\u002235\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n  \u003Crecipe name=\u0022completeStainlessShapes:VariantHelper\u0022 count=\u00221\u0022 craft_time=\u002210\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceForgedSteel\u0022 count=\u002250\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n  \u003Crecipe nam..."}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"item":1,"block":1},"topEntities":["block:steelShapes","item:meleeToolRepairT3Nailgun"]},{"name":"UnlockOpenDoors","loadOrder":17,"folderName":"UnlockOpenDoors","modType":"C#","health":"Healthy","healthNote":"C#: 5 game code patches","xmlOps":0,"csharpDeps":5,"removes":0,"oneLiner":"Patches TileEntitySecure","features":["Patches TileEntitySecure","Patches TileEntity","Patches BlockDoorSecure","Patches TileEntityLootContainer"],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[],"patches":[{"className":"BlockDoorSecure","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix(WorldBase _world, int _cIdx, Vector3i _blockPos, BlockValue _blockValue)\r\n\t\t{\r\n\t\t\t//IL_0014: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\tif (BlockDoor.IsDoorOpen(((BlockValue)(ref _blockValue)).meta))\r\n\t\t\t{\r\n\t\t\t\tTileEntity tileEntity = _world.GetTileEntity(_cIdx, _blockPos);\r\n\t\t\t\tTileEntitySecureDoor val = (TileEntitySecureDoor)(object)((tileEntity is TileEntitySecureDoor) ? tileEntity : null);\r\n\t\t\t\tif (val != null \u0026\u0026 ((TileEntitySecure)val).IsLocked() \u0026\u0026 ((TileEntitySecure)val).GetOwner() == null)\r\n\t\t\t\t{\r\n\t\t\t\t\t((TileEntitySecure)val).SetLocked(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}"},{"className":"TileEntity","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix(TileEntity __instance)\r\n\t\t{\r\n\t\t\t//IL_001a: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_001f: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\tTileEntitySecureDoor val = (TileEntitySecureDoor)(object)((__instance is TileEntitySecureDoor) ? __instance : null);\r\n\t\t\tif (val != null \u0026\u0026 ((TileEntitySecure)val).IsLocked())\r\n\t\t\t{\r\n\t\t\t\tBlockValue blockValue = ((TileEntity)val).blockValue;\r\n\t\t\t\tif (BlockDoor.IsDoorOpen(((BlockValue)(ref blockValue)).meta) \u0026\u0026 ((TileEntitySecure)val).GetOwner() == null)\r\n\t\t\t\t{\r\n\t\t\t\t\t((TileEntitySecure)val).SetLocked(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}"},{"className":"TileEntityLootContainer","methodName":"","patchType":"Postfix","codeSnippet":"public static void Postfix(TileEntityLootContainer __instance)\r\n\t\t{\r\n\t\t\t//IL_0014: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0019: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0033: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_0038: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\tTileEntitySecureDoor val = (TileEntitySecureDoor)(object)((__instance is TileEntitySecureDoor) ? __instance : null);\r\n\t\t\tif (val != null \u0026\u0026 ((TileEntitySecure)val).GetOwner() == null)\r\n\t\t\t{\r\n\t\t\t\tBlockValue blockValue = ((TileEntity)val).blockValue;\r\n\t\t\t\tif (!BlockDoor.IsDoorOpen(((BlockValue)(ref blockValue)).meta))\r\n\t\t\t\t{\r\n\t\t\t\t\tblockValue = ((TileEntity)val).blockValue;\r\n\t\t\t\t\t((TileEntitySecure)val).SetLocked((((BlockValue)(ref blockValue)).meta \u0026 4) \u003E 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}"},{"className":"TileEntitySecure","methodName":"","patchType":"Prefix","codeSnippet":"public static void Prefix(TileEntitySecure __instance, ref bool _isLocked)\r\n\t\t{\r\n\t\t\t//IL_0016: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\t//IL_001b: Unknown result type (might be due to invalid IL or missing references)\r\n\t\t\tif (_isLocked \u0026\u0026 __instance is TileEntitySecureDoor \u0026\u0026 __instance.GetOwner() == null)\r\n\t\t\t{\r\n\t\t\t\tBlockValue blockValue = ((TileEntity)__instance).blockValue;\r\n\t\t\t\tif (BlockDoor.IsDoorOpen(((BlockValue)(ref blockValue)).meta))\r\n\t\t\t\t{\r\n\t\t\t\t\t_isLocked = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}"}],"extensions":[{"baseClass":"imodapi","childClass":"IModApi"}],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"WoodleCoffs","loadOrder":18,"folderName":"WoodleCoffs","modType":"XML","health":"Healthy","healthNote":"XML: 2 appends on 0 entities","xmlOps":2,"csharpDeps":0,"removes":0,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003Cblock name=\u0022jwc1\u0022\u003E\r\n    \u003Cproperty name=\u0022Extends\u0022 value=\u0022pictureCanvas_01a\u0022 /\u003E\r\n    \u003Cproperty name=\u0022CreativeMode\u0022 value=\u0022Player\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Model\u0022 value=\u0022#@modfolder:Resources/WoodleCoffs.unity3d?jwc1\u0022 /\u003E\r\n    \u003Cproperty name=\u0022ModelOffset\u0022 value=\u00220,0,0\u0022 /\u003E\r\n    \u003Cproperty name=\u0022MultiBlockDim\u0022 value=\u00221,1,1\u0022 /\u003E\r\n    \u003Cproperty name=\u0022MaxDamage\u0022 value=\u002225\u0022 /\u003E\r\n    \u003Cproperty name=\u0022SortOrder2\u0022 value=\u00220001\u0022 /\u003E\r\n  \u003C/block\u003E\r\n  \u003Cblock name=\u0022jwc2\u0022\u003E\r\n    \u003Cproperty name=..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/recipes","elementContent":"\u003Cappend xpath=\u0022/recipes\u0022\u003E\r\n  \u003Crecipe name=\u0022jwcVariantHelper\u0022 count=\u00221\u0022 craft_time=\u00221\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceCloth\u0022 count=\u002215\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n\u003C/append\u003E"}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"WoodleSigns","loadOrder":19,"folderName":"WoodleSigns","modType":"XML","health":"Healthy","healthNote":"XML: 2 appends on 0 entities","xmlOps":2,"csharpDeps":0,"removes":0,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/blocks","elementContent":"\u003Cappend xpath=\u0022/blocks\u0022\u003E\r\n  \u003Cblock name=\u0022signJWNeon\u0022\u003E\r\n    \u003Cproperty name=\u0022Class\u0022 value=\u0022PoweredLight\u0022 /\u003E\r\n    \u003Cproperty name=\u0022DescriptionKey\u0022 value=\u0022lightPOIGroupDesc\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Shape\u0022 value=\u0022ModelEntity\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Model\u0022 value=\u0022#@modfolder:Resources/JWsigns.unity3d?JWsign1\u0022 /\u003E\r\n    \u003Cproperty name=\u0022ModelOffset\u0022 value=\u00220,0,0\u0022 /\u003E\r\n    \u003Cproperty name=\u0022RuntimeSwitch\u0022 value=\u0022true\u0022 /\u003E\r\n    \u003Cproperty name=\u0022Material\u0022 value=\u0022Mmetal_weak\u0022 /\u003E\r\n    \u003Cproperty name=\u0022ImposterDontBl..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/recipes","elementContent":"\u003Cappend xpath=\u0022/recipes\u0022\u003E\r\n  \u003Crecipe name=\u0022signJWVariantHelper\u0022 count=\u00221\u0022 craft_time=\u00221\u0022\u003E\r\n    \u003Cingredient name=\u0022resourceForgedIron\u0022 count=\u00224\u0022 /\u003E\r\n    \u003Cingredient name=\u0022resourceElectricParts\u0022 count=\u00224\u0022 /\u003E\r\n  \u003C/recipe\u003E\r\n\u003C/append\u003E"}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"WoodleSpeaker","loadOrder":20,"folderName":"WoodleSpeaker","modType":"XML","health":"Healthy","healthNote":"Removes 1 game element(s)","xmlOps":2,"csharpDeps":0,"removes":1,"oneLiner":"Modifies Audio","features":[],"systems":["Audio"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/Sounds","elementContent":"\u003Cappend xpath=\u0022/Sounds\u0022\u003E\r\n  \u003CSoundDataNode name=\u0022alarm1\u0022\u003E\r\n    \u003CAudioSource name=\u0022Sounds/AudioSource_VO_Announce\u0022 /\u003E\r\n    \u003C!--\u003CAudioClip ClipName=\u0022#@modfolder:Resources/WoodleSpeaker.unity3d?speaker01\u0022 /\u003E--\u003E\r\n    \u003CAudioClip ClipName=\u0022#@modfolder:Resources/WoodleSpeaker.unity3d?Speaker/Audio Track\u0022 /\u003E\r\n    \u003CAudioClip ClipName=\u0022#@modfolder:Resources/WoodleSpeaker.unity3d?Speaker/Audio Track-2\u0022 /\u003E\r\n    \u003CAudioClip ClipName=\u0022#@modfolder:Resources/WoodleSpeaker.unity3d?Speaker/Audio Track-3\u0022 /\u003E\r\n    \u003C..."},{"operation":"remove","targetType":"sound","targetName":"alarm1","property":null,"xpath":"/Sounds/SoundDataNode[@name=\u0027alarm1\u0027]","elementContent":"\u003Cremove xpath=\u0022/Sounds/SoundDataNode[@name=\u0027alarm1\u0027]\u0022 /\u003E"}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"sound":1},"topEntities":["sound:alarm1"]},{"name":"zByteblazarsScreamers","loadOrder":21,"folderName":"zByteblazarsScreamers","modType":"XML","health":"Healthy","healthNote":"XML: 5 appends on 0 entities","xmlOps":10,"csharpDeps":0,"removes":0,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/entity_classes/entity_class[@name=\u0027zombieScreamerFeral\u0027 or @name=\u0027zombieScreamerRadiated\u0027]","elementContent":"\u003Cappend xpath=\u0022/entity_classes/entity_class[@name=\u0027zombieScreamerFeral\u0027 or @name=\u0027zombieScreamerRadiated\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022AIFeralSense\u0022 value=\u00223\u0022 /\u003E\r\n  \u003Cproperty name=\u0022AINoiseSeekDist\u0022 value=\u002216\u0022 /\u003E\r\n  \u003Cproperty name=\u0022SoundRandom\u0022 value=\u0022\u0022 /\u003E\r\n  \u003Cproperty name=\u0022SoundAttack\u0022 value=\u0022\u0022 /\u003E\r\n  \u003Cproperty name=\u0022SoundSense\u0022 value=\u0022\u0022 /\u003E\r\n  \u003Cproperty name=\u0022LookAtAngle\u0022 value=\u00220\u0022 /\u003E\r\n  \u003Cproperty name=\u0022WalkType\u0022 value=\u002222\u0022 /\u003E\r\n  \u003Cproperty name=\u0022AIPathCostScale\u0022 value=\u0022.8,1.2\u0022 /\u003E\r\n  \u003Cproperty name=\u0022AIT..."},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"//entity_class[@name=\u0027zombieGuppyLucy\u0027]","elementContent":"\u003Cappend xpath=\u0022//entity_class[@name=\u0027zombieGuppyLucy\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022AIFeralSense\u0022 value=\u00223\u0022 /\u003E\r\n  \u003Cproperty name=\u0022AINoiseSeekDist\u0022 value=\u002216\u0022 /\u003E\r\n  \u003Cproperty name=\u0022SoundRandom\u0022 value=\u0022\u0022 /\u003E\r\n  \u003Cproperty name=\u0022SoundAttack\u0022 value=\u0022\u0022 /\u003E\r\n  \u003Cproperty name=\u0022SoundSense\u0022 value=\u0022\u0022 /\u003E\r\n  \u003Cproperty name=\u0022LookAtAngle\u0022 value=\u00220\u0022 /\u003E\r\n  \u003Cproperty name=\u0022WalkType\u0022 value=\u002222\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/entity_classes/entity_class[@name=\u0027zombieScreamerFeral\u0027 or @name=\u0027zombieScreamerRadiated\u0027]","elementContent":"\u003Cappend xpath=\u0022/entity_classes/entity_class[@name=\u0027zombieScreamerFeral\u0027 or @name=\u0027zombieScreamerRadiated\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022AIFeralSense\u0022 value=\u00223\u0022 /\u003E\r\n  \u003Cproperty name=\u0022AINoiseSeekDist\u0022 value=\u002216\u0022 /\u003E\r\n  \u003Cproperty name=\u0022SoundRandom\u0022 value=\u0022\u0022 /\u003E\r\n  \u003Cproperty name=\u0022SoundAttack\u0022 value=\u0022\u0022 /\u003E\r\n  \u003Cproperty name=\u0022SoundSense\u0022 value=\u0022\u0022 /\u003E\r\n  \u003Cproperty name=\u0022LookAtAngle\u0022 value=\u00220\u0022 /\u003E\r\n  \u003Cproperty name=\u0022WalkType\u0022 value=\u002222\u0022 /\u003E\r\n  \u003Cproperty name=\u0022AIPathCostScale\u0022 value=\u00220.8,1.2\u0022 /\u003E\r\n  \u003Cproperty name=\u0022AI..."},{"operation":"csv","targetType":null,"targetName":null,"property":null,"xpath":"//entitygroup[@name=\u0027ZombieScouts\u0027 or @name=\u0027zombieScreamer\u0027]/text()","elementContent":"\u003Ccsv xpath=\u0022//entitygroup[@name=\u0027ZombieScouts\u0027 or @name=\u0027zombieScreamer\u0027]/text()\u0022 op=\u0022add\u0022 delim=\u0022\\n\u0022\u003E\r\n\t\tzombieScreamerFeral\r\n\t\u003C/csv\u003E"},{"operation":"csv","targetType":null,"targetName":null,"property":null,"xpath":"//entitygroup[contains(text(),\u0027zombieScreamer,\u0027) and not (contains(text(),\u0027zombieScreamerFeral\u0027))]/text()","elementContent":"\u003Ccsv xpath=\u0022//entitygroup[contains(text(),\u0027zombieScreamer,\u0027) and not (contains(text(),\u0027zombieScreamerFeral\u0027))]/text()\u0022 op=\u0022add\u0022 delim=\u0022\\n\u0022\u003E\r\n\t\tzombieScreamerFeral, .5\r\n\t\u003C/csv\u003E"},{"operation":"csv","targetType":null,"targetName":null,"property":null,"xpath":"//entitygroup[contains(text(),\u0027zombieScreamer\u0027) and not (contains(text(),\u0027zombieScreamer,\u0027)) and not (contains(text(),\u0027zombieScreamerFeral\u0027)) and not (contains(text(),\u0027zombieScreamerRadiated\u0027))]/text()","elementContent":"\u003Ccsv xpath=\u0022//entitygroup[contains(text(),\u0027zombieScreamer\u0027) and not (contains(text(),\u0027zombieScreamer,\u0027)) and not (contains(text(),\u0027zombieScreamerFeral\u0027)) and not (contains(text(),\u0027zombieScreamerRadiated\u0027))]/text()\u0022 op=\u0022add\u0022 delim=\u0022\\n\u0022\u003E\r\n\t\tzombieScreamerFeral, .5\r\n\t\u003C/csv\u003E"},{"operation":"csv","targetType":null,"targetName":null,"property":null,"xpath":"//entitygroup[contains(text(),\u0027zombieScreamer,\u0027)]/text()","elementContent":"\u003Ccsv xpath=\u0022//entitygroup[contains(text(),\u0027zombieScreamer,\u0027)]/text()\u0022 op=\u0022remove\u0022 delim=\u0022\\n\u0022\u003E\r\n\t\tzombieScreamer,*\r\n\t\u003C/csv\u003E"},{"operation":"csv","targetType":null,"targetName":null,"property":null,"xpath":"//entitygroup[contains(text(),\u0027zombieScreamer\u0027)]/text()","elementContent":"\u003Ccsv xpath=\u0022//entitygroup[contains(text(),\u0027zombieScreamer\u0027)]/text()\u0022 op=\u0022remove\u0022 delim=\u0022\\n\u0022\u003E\r\n\t\tzombieScreamer\r\n\t\u003C/csv\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/gameevents","elementContent":"\u003Cappend xpath=\u0022/gameevents\u0022\u003E\r\n  \u003Caction_sequence name=\u0022bbscreamers_slap\u0022\u003E\r\n    \u003Cproperty name=\u0022action_type\u0022 value=\u0022Game\u0022 /\u003E\r\n    \u003Caction class=\u0022RandomizeRotation\u0022\u003E\r\n      \u003Cproperty name=\u0022phase\u0022 value=\u00220\u0022 /\u003E\r\n    \u003C/action\u003E\r\n  \u003C/action_sequence\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/items","elementContent":"\u003Cappend xpath=\u0022/items\u0022\u003E\r\n  \u003Citem name=\u0022bbScreamerHand\u0022\u003E\r\n    \u003Cproperty name=\u0022Extends\u0022 value=\u0022meleeHandZombieFeral\u0022 /\u003E\r\n    \u003Cproperty class=\u0022Action0\u0022\u003E\r\n      \u003Cproperty name=\u0022DamageEntity\u0022 value=\u002220\u0022 /\u003E\r\n      \u003Cproperty name=\u0022DamageBlock\u0022 value=\u002224\u0022 /\u003E\r\n      \u003Cproperty name=\u0022Range\u0022 value=\u00221.6\u0022 /\u003E\r\n    \u003C/property\u003E\r\n    \u003Ceffect_group name=\u0022bbSlap\u0022 tiered=\u0022false\u0022\u003E\r\n      \u003Ctriggered_effect trigger=\u0022onSelfAttackedOther\u0022 action=\u0022CallGameEvent\u0022 target=\u0022other\u0022 event=\u0022bbscreamers_slap\u0022 /\u003E\r\n      \u003Ctriggered..."}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"ZzzMizores Re-plant Player Crops","loadOrder":22,"folderName":"ZzzMizores Re-plant Player Crops","modType":"XML","health":"Healthy","healthNote":"XML: 14 appends on 13 entities","xmlOps":14,"csharpDeps":0,"removes":0,"oneLiner":"Modifies Blocks","features":[],"systems":["Blocks"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":"block","targetName":"plantedChrysanthemum3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedChrysanthemum3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedChrysanthemum3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedChrysanthemum1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedCotton3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedCotton3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedCotton3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedCotton1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedGoldenrod3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedGoldenrod3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedGoldenrod3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedGoldenrod1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedHop3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedHop3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedHop3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedHop1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedYucca3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedYucca3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedYucca3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedYucca1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedAloe3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedAloe3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedAloe3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedAloe1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedBlueberry3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedBlueberry3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedBlueberry3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedBlueberry1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedPotato3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedPotato3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedPotato3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedPotato1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedCorn3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedCorn3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedCorn3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedCorn1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedGraceCorn3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedGraceCorn3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedGraceCorn3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedGraceCorn1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedMushroom3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedMushroom3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedMushroom3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedMushroom1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedCoffee3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedCoffee3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedCoffee3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedCoffee1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedPumpkin3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedPumpkin3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedPumpkin3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedPumpkin1\u0022 /\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"block","targetName":"plantedPumpkin3HarvestPlayer","property":null,"xpath":"/blocks/block[@name=\u0027plantedPumpkin3HarvestPlayer\u0027]","elementContent":"\u003Cappend xpath=\u0022/blocks/block[@name=\u0027plantedPumpkin3HarvestPlayer\u0027]\u0022\u003E\r\n  \u003Cproperty name=\u0022DowngradeBlock\u0022 value=\u0022plantedPumpkin1\u0022 /\u003E\r\n\u003C/append\u003E"}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"block":14},"topEntities":["block:plantedPumpkin3HarvestPlayer","block:plantedAloe3HarvestPlayer","block:plantedBlueberry3HarvestPlayer","block:plantedChrysanthemum3HarvestPlayer","block:plantedCoffee3HarvestPlayer","block:plantedCorn3HarvestPlayer","block:plantedCotton3HarvestPlayer","block:plantedGoldenrod3HarvestPlayer","block:plantedGraceCorn3HarvestPlayer","block:plantedHop3HarvestPlayer"]},{"name":"zzzzzzByteblazarsNoHeatGeneration","loadOrder":23,"folderName":"zzzzzzByteblazarsNoHeatGeneration","modType":"XML","health":"Healthy","healthNote":"Removes 2 game element(s)","xmlOps":3,"csharpDeps":0,"removes":2,"oneLiner":"Game modification","features":[],"systems":[],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"remove","targetType":null,"targetName":null,"property":null,"xpath":"/blocks/block/property[@name=\u0027Class\u0027 and @value=\u0027TorchHeatMap\u0027]","elementContent":"\u003Cremove xpath=\u0022/blocks/block/property[@name=\u0027Class\u0027 and @value=\u0027TorchHeatMap\u0027]\u0022 /\u003E"},{"operation":"remove","targetType":null,"targetName":null,"property":null,"xpath":"/blocks/block/property[starts-with(@name,\u0027HeatMap\u0027)]","elementContent":"\u003Cremove xpath=\u0022/blocks/block/property[starts-with(@name,\u0027HeatMap\u0027)]\u0022 /\u003E"},{"operation":"removeattribute","targetType":null,"targetName":null,"property":"heat_map_strength","xpath":"/Sounds/SoundDataNode/Noise/@heat_map_strength","elementContent":"\u003Cremoveattribute xpath=\u0022/Sounds/SoundDataNode/Noise/@heat_map_strength\u0022 /\u003E"}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":null,"topEntities":null},{"name":"zzzzzzzByteblazarsOlfactoryScreamers","loadOrder":24,"folderName":"zzzzzzzByteblazarsOlfactoryScreamers","modType":"XML","health":"Healthy","healthNote":"XML: 4 appends on 2 entities","xmlOps":4,"csharpDeps":0,"removes":0,"oneLiner":"Modifies Buffs/Effects","features":[],"systems":["Buffs/Effects"],"warnings":[],"xmlInfo":{"displayName":"","description":"","author":"","version":"","website":""},"operations":[{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"/buffs","elementContent":"\u003Cappend xpath=\u0022/buffs\u0022\u003E\r\n  \u003Cbuff name=\u0022bbos_buffSmellTracking\u0022 hidden=\u0022true\u0022\u003E\r\n    \u003Cstack_type value=\u0022ignore\u0022 /\u003E\r\n    \u003Cupdate_rate value=\u002210\u0022 /\u003E\r\n    \u003C!-- stage 3-4 --\u003E\r\n    \u003Ceffect_group name=\u0022back to stalking if needed\u0022\u003E\r\n      \u003Crequirement name=\u0022CVarCompare\u0022 cvar=\u0022$bbosReadyToSpawn\u0022 operation=\u0022GT\u0022 value=\u00220\u0022 /\u003E\r\n      \u003Crequirement_group op=\u0022or\u0022\u003E\r\n        \u003C!-- reminder: InSafeZone is only relevant for Twitch --\u003E\r\n        \u003Crequirement name=\u0022InSafeZone\u0022 /\u003E\r\n        \u003Crequirement name=\u0022IsAttachedTo..."},{"operation":"append","targetType":"buff","targetName":"buffStatusCheck01","property":null,"xpath":"/buffs/buff[@name=\u0027buffStatusCheck01\u0027]","elementContent":"\u003Cappend xpath=\u0022/buffs/buff[@name=\u0027buffStatusCheck01\u0027]\u0022\u003E\r\n  \u003Ceffect_group\u003E\r\n    \u003Ctriggered_effect trigger=\u0022onSelfBuffUpdate\u0022 action=\u0022AddBuff\u0022 buff=\u0022bbos_buffSmellTracking\u0022\u003E\r\n      \u003Crequirement name=\u0022!HasBuff\u0022 buff=\u0022bbos_buffSmellTracking\u0022 /\u003E\r\n      \u003Crequirement name=\u0022!HasBuff\u0022 buff=\u0022god\u0022 /\u003E\r\n    \u003C/triggered_effect\u003E\r\n  \u003C/effect_group\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":"buff","targetName":"god","property":null,"xpath":"/buffs/buff[@name=\u0027god\u0027]","elementContent":"\u003Cappend xpath=\u0022/buffs/buff[@name=\u0027god\u0027]\u0022\u003E\r\n  \u003Ceffect_group\u003E\r\n    \u003Ctriggered_effect trigger=\u0022onSelfBuffStart\u0022 action=\u0022RemoveBuff\u0022 buff=\u0022bbos_buffSmellTracking\u0022 /\u003E\r\n  \u003C/effect_group\u003E\r\n\u003C/append\u003E"},{"operation":"append","targetType":null,"targetName":null,"property":null,"xpath":"Sounds","elementContent":"\u003Cappend xpath=\u0022Sounds\u0022\u003E\r\n  \u003CSoundDataNode name=\u0022bbos_spawnScouts\u0022\u003E\r\n    \u003CAudioSource name=\u0022@:Sounds/Prefabs/AudioSource_Screamer.prefab\u0022 /\u003E\r\n    \u003CNoise ID=\u00220\u0022 time=\u00224\u0022 heat_map_strength=\u002225\u0022 heat_map_time=\u0022300\u0022 /\u003E\r\n    \u003CAudioClip ClipName=\u0022@:Sounds/Misc/silencefiller.wav\u0022 /\u003E\r\n    \u003CLocalCrouchVolumeScale value=\u00220\u0022 /\u003E\r\n    \u003CCrouchNoiseScale value=\u00221.0\u0022 /\u003E\r\n    \u003CNoiseScale value=\u00221\u0022 /\u003E\r\n    \u003CMaxVoices value=\u002220\u0022 /\u003E\r\n    \u003CMaxVoicesPerEntity value=\u00226\u0022 /\u003E\r\n    \u003CMaxRepeatRate value=\u00220.001\u0022 /\u003E\r\n  \u003C/Soun..."}],"patches":[],"extensions":[],"entityDeps":null,"entityTypes":{"buff":2},"topEntities":["buff:buffStatusCheck01","buff:god"]}];


function filterMods() {
  const query = document.getElementById('mod-search').value;
  const healthFilter = document.getElementById('health-filter').value;
  const typeFilter = document.getElementById('type-filter').value;
  const useFuzzy = document.getElementById('fuzzy-toggle').checked;

  let filtered = MOD_DATA.filter(m => {
    if (healthFilter && m.health !== healthFilter) return false;
    if (typeFilter && m.modType !== typeFilter) return false;
    return true;
  });

  if (query) {
    if (useFuzzy) {
      filtered = filtered
        .map(m => ({ mod: m, score: fuzzyScore(query, m.name) }))
        .filter(x => x.score > 0)
        .sort((a, b) => b.score - a.score)
        .map(x => x.mod);
    } else {
      const q = query.toLowerCase();
      filtered = filtered.filter(m => m.name.toLowerCase().includes(q));
    }
  }

  renderMods(filtered);
}

function renderMods(mods) {
  const container = document.getElementById('mod-results');

  container.innerHTML = mods.map(m => `
    <details id="mod-${m.name.replace(/[^a-zA-Z0-9]/g, '_')}">
      <summary>
        <span class="load-order-badge" title="Load Order">#${m.loadOrder}</span>
        <span style="flex: 1;">${m.name}</span>
        ${getModTypeBadge(m.modType)}
        ${getHealthBadge(m.health)}
        <span class="text-dim" style="font-size: 12px; margin-left: 0.5rem;">${m.healthNote || ''}</span>
      </summary>
      <div class="details-body">
        <div style="margin-bottom: 1rem; display: flex; gap: 1rem; flex-wrap: wrap; font-size: 12px; color: var(--text-muted);">
          <span title="Load Order"> Load Order: <strong>#${m.loadOrder}</strong></span>
          ${m.folderName ? `<span title="Folder Name"> ${m.folderName}</span>` : ''}
        </div>
        
        ${m.xmlInfo ? `
          <div style="margin-bottom: 1rem; color: var(--text-muted);">
            ${m.xmlInfo.author ? `by <strong>${m.xmlInfo.author}</strong>` : ''}
            ${m.xmlInfo.version ? `  v${m.xmlInfo.version}` : ''}
            ${m.xmlInfo.website ? `  <a href="${m.xmlInfo.website}" target="_blank">${m.xmlInfo.website}</a>` : ''}
          </div>
          ${m.xmlInfo.description ? `<p style="font-style: italic; margin-bottom: 1rem;">${m.xmlInfo.description}</p>` : ''}
        ` : ''}

        ${m.oneLiner && !m.oneLiner.includes('no detectable') ? `<p style="margin-bottom: 1rem;">${m.oneLiner}</p>` : ''}

        ${m.features && m.features.length > 0 ? `
          <div style="margin-bottom: 1rem;">
            <strong class="text-dim">Features:</strong>
            <span id="features-${m.name.replace(/[^a-zA-Z0-9]/g, '_')}-short">
              ${m.features.slice(0, 5).join('  ')}
              ${m.features.length > 5 ? ` <button onclick="toggleFeatures('${m.name.replace(/[^a-zA-Z0-9]/g, '_')}')" style="background: none; border: none; color: var(--accent); cursor: pointer; font-size: 12px;">[+${m.features.length - 5} more]</button>` : ''}
            </span>
            ${m.features.length > 5 ? `<span id="features-${m.name.replace(/[^a-zA-Z0-9]/g, '_')}-full" style="display: none;">
              ${m.features.join('  ')}
              <button onclick="toggleFeatures('${m.name.replace(/[^a-zA-Z0-9]/g, '_')}')" style="background: none; border: none; color: var(--accent); cursor: pointer; font-size: 12px;">[show less]</button>
            </span>` : ''}
          </div>
        ` : ''}

        ${m.systems && m.systems.length > 0 ? `
          <div style="margin-bottom: 1rem;">
            <strong class="text-dim">Systems Affected:</strong> ${m.systems.join(', ')}
          </div>
        ` : ''}

        ${m.warnings && m.warnings.length > 0 ? `
          <div style="color: var(--accent-secondary); margin-bottom: 1rem;">
             ${m.warnings.join('  ')}
          </div>
        ` : ''}

        ${m.xmlOps > 0 ? `
          <div style="margin-bottom: 1rem;">
            <strong class="text-dim">XML Operations:</strong> ${m.xmlOps} operations
            ${m.removes > 0 ? `<span class="text-warning"> (${m.removes} removals)</span>` : ''}
          </div>
        ` : ''}

        ${(m.patches && m.patches.length > 0) || (m.extensions && m.extensions.length > 0) || (m.entityDeps && m.entityDeps.length > 0) ? `
          <div style="margin-bottom: 1rem;">
            <strong class="text-dim">C# Analysis:</strong>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
              ${m.patches && m.patches.length > 0 ? '<span class="tag tag-info">Harmony Patches <span style="opacity: 0.7;">(' + m.patches.length + ')</span></span>' : ''}
              ${m.extensions && m.extensions.length > 0 ? '<span class="tag tag-type">Class Extensions <span style="opacity: 0.7;">(' + m.extensions.length + ')</span></span>' : ''}
              ${m.entityDeps && m.entityDeps.length > 0 ? '<span class="tag tag-medium">Entity Refs <span style="opacity: 0.7;">(' + m.entityDeps.length + ')</span></span>' : ''}
            </div>
          </div>
        ` : ''}

        ${m.entityTypes && Object.keys(m.entityTypes).length > 0 ? `
          <div style="margin-bottom: 1rem;">
            <strong class="text-dim">Entity Types Modified:</strong>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
              ${Object.entries(m.entityTypes).map(function(e) { 
                return '<span class="tag tag-type">' + e[0] + ' <span style="opacity: 0.7;">(' + e[1] + ')</span></span>';
              }).join('')}
            </div>
          </div>
        ` : ''}

        ${m.topEntities && m.topEntities.length > 0 ? `
          <div style="margin-bottom: 1rem;">
            <strong class="text-dim">Top Targeted Entities:</strong>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
              ${m.topEntities.slice(0, 6).map(function(entity) {
                var name = entity.split(':')[1] || entity;
                return '<a href="entities.html?search=' + encodeURIComponent(name) + '" class="tag" style="background: var(--bg-tertiary);">' + name + '</a>';
              }).join('')}
              ${m.topEntities.length > 6 ? '<span class="text-dim">+' + (m.topEntities.length - 6) + ' more</span>' : ''}
            </div>
          </div>
        ` : ''}

        ${m.operations && m.operations.length > 0 ? `
          <details style="margin-top: 1rem;">
            <summary>XML Operations Detail (${m.operations.length})</summary>
            <div class="details-body" style="max-height: 400px; overflow-y: auto;">
              <table class="data-table">
                <thead><tr><th>Operation</th><th>Target</th><th>Details</th></tr></thead>
                <tbody>
                  ${m.operations.slice(0, 50).map(function(op) {
                    var hasTarget = op.targetType && op.targetName;
                    var targetCell = hasTarget 
                      ? '<a href="entities.html?search=' + encodeURIComponent(op.targetName || '') + '"><span class="tag tag-type">' + (op.targetType || '') + '</span> ' + (op.targetName || '') + '</a>'
                      : (op.xpath ? '<code class="text-muted" style="font-size: 11px; word-break: break-all;">' + escapeHtml(op.xpath) + '</code>' : '<span class="text-dim">-</span>');
                    
                    var detailsCell;
                    if (op.property) {
                      detailsCell = '<span class="text-muted">' + escapeHtml(op.property) + '</span>';
                    }
                    if (op.elementContent) {
                      var xmlContent = '<details class="xml-expand"><summary style="cursor: pointer; font-size: 11px; color: var(--accent-secondary);">' + (op.property ? '' : ' ') + 'View XML</summary><pre style="background: var(--bg-secondary); padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem; font-size: 10px; overflow-x: auto; white-space: pre-wrap; max-height: 200px; overflow-y: auto;">' + escapeHtml(op.elementContent) + '</pre></details>';
                      detailsCell = (detailsCell || '') + xmlContent;
                    }
                    if (!detailsCell) {
                      detailsCell = '<span class="text-dim">-</span>';
                    }
                    
                    return '<tr><td><span class="tag ' + getOpClass(op.operation) + '">' + op.operation + '</span></td><td>' + targetCell + '</td><td>' + detailsCell + '</td></tr>';
                  }).join('')}
                  ${m.operations.length > 50 ? `<tr><td colspan="3" class="text-dim">... and ${m.operations.length - 50} more</td></tr>` : ''}
                </tbody>
              </table>
            </div>
          </details>
        ` : ''}

        ${m.patches && m.patches.length > 0 ? `
          <details style="margin-top: 1rem;">
            <summary>Harmony Patches (${m.patches.length})</summary>
            <div class="details-body">
              <table class="data-table">
                <thead><tr><th>Class</th><th>Method</th><th>Type</th><th>Code</th></tr></thead>
                <tbody>
                  ${m.patches.map((p, idx) => `
                    <tr>
                      <td><code>${p.className}</code></td>
                      <td><code>${p.methodName}</code></td>
                      <td><span class="tag tag-info">${p.patchType}</span></td>
                      <td>${p.codeSnippet ? `<details class="code-expand"><summary style="cursor: pointer; font-size: 11px; color: var(--accent);">View Code</summary><pre class="code-viewer">${escapeHtml(p.codeSnippet)}</pre></details>` : '<span class="text-dim">-</span>'}</td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </div>
          </details>
        ` : ''}

        ${m.extensions && m.extensions.length > 0 ? `
          <details style="margin-top: 1rem;">
            <summary>Class Extensions (${m.extensions.length})</summary>
            <div class="details-body">
              <table class="data-table">
                <thead><tr><th>Base Class</th><th>Extended By</th></tr></thead>
                <tbody>
                  ${m.extensions.map(e => `
                    <tr>
                      <td><span class="tag tag-type">${e.baseClass}</span></td>
                      <td><code>${e.childClass}</code></td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </div>
          </details>
        ` : ''}

        ${m.entityDeps && m.entityDeps.length > 0 ? `
          <details style="margin-top: 1rem;">
            <summary>C# Entity Dependencies (${m.entityDeps.length})</summary>
            <div class="details-body" style="max-height: 400px; overflow-y: auto;">
              <table class="data-table">
                <thead><tr><th>Type</th><th>Entity</th><th>Source</th></tr></thead>
                <tbody>
                  ${m.entityDeps.map(e => `
                    <tr>
                      <td><span class="tag tag-type">${e.entityType}</span></td>
                      <td><a href="entities.html?search=${encodeURIComponent(e.entityName)}"><code>${e.entityName}</code></a></td>
                      <td><span class="text-muted" style="font-size: 11px;">${e.sourceFile}</span></td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </div>
          </details>
        ` : ''}
      </div>
    </details>
  `).join('');
}

function getModTypeBadge(type) {
  const typeMap = {
    'XML': 'tag-low',
    'C#': 'tag-info',
    'Hybrid': 'tag-medium',
    'Config': 'tag-type'
  };
  const cls = typeMap[type] || 'tag-type';
  return `<span class="tag ${cls}">${type}</span>`;
}

function escapeHtml(str) {
  if (!str) return '';
  return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/'/g, '&#39;').replace(/"/g, '&quot;');
}

function getHealthBadge(health) {
  const cls = health === 'Healthy' ? 'tag-healthy' : health === 'Review' ? 'tag-review' : 'tag-broken';
  return `<span class="tag ${cls}">${health}</span>`;
}

function getOpClass(op) {
  if (op === 'remove') return 'tag-high';
  if (op === 'set' || op === 'setattribute') return 'tag-medium';
  return 'tag-low';
}

function toggleFeatures(modId) {
  const shortEl = document.getElementById('features-' + modId + '-short');
  const fullEl = document.getElementById('features-' + modId + '-full');
  if (shortEl && fullEl) {
    const isExpanded = fullEl.style.display !== 'none';
    shortEl.style.display = isExpanded ? 'inline' : 'none';
    fullEl.style.display = isExpanded ? 'none' : 'inline';
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  filterMods();

  // Check for search param
  const params = new URLSearchParams(window.location.search);
  const searchParam = params.get('search');
  if (searchParam) {
    document.getElementById('mod-search').value = searchParam;
    filterMods();

    // Open the matching mod details
    const modEl = document.getElementById('mod-' + searchParam.replace(/[^a-zA-Z0-9]/g, '_'));
    if (modEl) {
      modEl.open = true;
      modEl.scrollIntoView({ behavior: 'smooth' });
    }
  }
});

</script>
</body>
</html>